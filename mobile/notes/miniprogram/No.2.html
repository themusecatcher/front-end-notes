<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Taro3 &amp; Vue3 &amp; typescript &amp; less | Front-end Notes</title>
    <meta name="description" content="前端笔记文档">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/front-end-notes/assets/style.BtRxDupO.css" as="style">
    <link rel="preload stylesheet" href="/front-end-notes/vp-icons.css" as="style">
    
    <script type="module" src="/front-end-notes/assets/app.De-oRcMk.js"></script>
    <link rel="preload" href="/front-end-notes/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/front-end-notes/assets/chunks/theme.CYFFwGCl.js">
    <link rel="modulepreload" href="/front-end-notes/assets/chunks/framework.CphcMI6B.js">
    <link rel="modulepreload" href="/front-end-notes/assets/mobile_notes_miniprogram_No.2.md.Co2MQf0I.lean.js">
    <link rel="icon" href="/front-end-notes/amazing-icon.svg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body><!--teleport start anchor--><!----><!--teleport anchor-->
    <div id="app"><div class="Layout" data-v-468fcf2f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-afff4634></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-afff4634>Skip to content</a><!--]--><!----><header class="VPNav" data-v-468fcf2f data-v-4c5844e7><div class="VPNavBar" data-v-4c5844e7 data-v-fc2d6afc><div class="wrapper" data-v-fc2d6afc><div class="container" data-v-fc2d6afc><div class="title" data-v-fc2d6afc><div class="VPNavBarTitle has-sidebar" data-v-fc2d6afc data-v-fb422934><a class="title" href="/front-end-notes/" data-v-fb422934><!--[--><!--]--><!--[--><img class="VPImage logo" src="/front-end-notes/amazing-icon.svg" alt data-v-affcc00b><!--]--><span data-v-fb422934>Front-end Notes</span><!--[--><!--]--></a></div></div><div class="content" data-v-fc2d6afc><div class="content-body" data-v-fc2d6afc><!--[--><!--]--><div class="VPNavBarSearch search" data-v-fc2d6afc><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-fc2d6afc data-v-2d668953><span id="main-nav-aria-label" class="visually-hidden" data-v-2d668953> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/javascript/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>JavaScript</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/typescript/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>TypeScript</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/html/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>HTML</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/css/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>CSS</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/vue2/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>Vue2</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/vue3/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>Vue3</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/front-end-notes/mobile/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>Mobile</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/engineering/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>Engineering</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/http/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>Http</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/front-end-notes/plugins/started.html" tabindex="0" data-v-2d668953 data-v-4f3675f4><!--[--><span data-v-4f3675f4>Plugins</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2d668953 data-v-acc5f11a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-acc5f11a><span class="text" data-v-acc5f11a><!----><span data-v-acc5f11a>Links</span><span class="vpi-chevron-down text-icon" data-v-acc5f11a></span></span></button><div class="menu" data-v-acc5f11a><div class="VPMenu" data-v-acc5f11a data-v-9cff60e9><div class="items" data-v-9cff60e9><!--[--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://github.com/themusecatcher" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>My Github</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://themusecatcher.blog.csdn.net" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>My CSDN</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://themusecatcher.github.io/vue-amazing-ui/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Amazing UI</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://www.naiveui.com/zh-CN/dark" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Naive UI</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://www.naiveadmin.com/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Naive Admin</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://docs.naiveadmin.com/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Naive Ui Admin</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://www.antdv.com/docs/vue/introduce-cn" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Ant Design Vue</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://element-plus.org/zh-CN/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Element Plus</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://arco.design/vue/docs/start" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Arco Design Vue</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-9cff60e9 data-v-678adc6c><!----><!--[--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://cn.vuejs.org/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Vue</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://ts.nodejs.cn/docs/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>TypeScript</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://cn.vitejs.dev/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Vite</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://cn.rollupjs.org/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Rollup</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://less.bootcss.com/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Less</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://vitepress.dev/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>VitePress</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://markdown.com.cn/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Markdown</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://www.npmjs.com/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>npm</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-678adc6c data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://www.pnpm.cn/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>pnpm</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-2d668953 data-v-acc5f11a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-acc5f11a><span class="text" data-v-acc5f11a><!----><span data-v-acc5f11a>Docs</span><span class="vpi-chevron-down text-icon" data-v-acc5f11a></span></span></button><div class="menu" data-v-acc5f11a><div class="VPMenu" data-v-acc5f11a data-v-9cff60e9><div class="items" data-v-9cff60e9><!--[--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://v2.cn.vuejs.org/v2/guide/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Vue 2 Docs</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://cn.vuejs.org/guide/introduction.html" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Vue 3 Docs</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://vueuse.org/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>VueUse</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://www.tslang.cn/docs/home.html" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>TypeScript Docs</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>MDN Web Docs</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://less.bootcss.com/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Less Docs</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-9cff60e9 data-v-cdb53498><a class="VPLink link vp-external-link-icon" href="https://www.lodashjs.com/" target="_blank" rel="noreferrer" data-v-cdb53498><!--[--><span data-v-cdb53498>Lodash Docs</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-fc2d6afc data-v-4a718b2f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-4a718b2f data-v-d54b1a18 data-v-b5036166><span class="check" data-v-b5036166><span class="icon" data-v-b5036166><!--[--><span class="vpi-sun sun" data-v-d54b1a18></span><span class="vpi-moon moon" data-v-d54b1a18></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-fc2d6afc data-v-59931e23 data-v-4803473e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/themusecatcher/front-end-notes" aria-label="github" target="_blank" rel="noopener" data-v-4803473e data-v-adb60df4><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-fc2d6afc data-v-9a218048 data-v-acc5f11a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-acc5f11a><span class="vpi-more-horizontal icon" data-v-acc5f11a></span></button><div class="menu" data-v-acc5f11a><div class="VPMenu" data-v-acc5f11a data-v-9cff60e9><!----><!--[--><!--[--><!----><div class="group" data-v-9a218048><div class="item appearance" data-v-9a218048><p class="label" data-v-9a218048>Appearance</p><div class="appearance-action" data-v-9a218048><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-9a218048 data-v-d54b1a18 data-v-b5036166><span class="check" data-v-b5036166><span class="icon" data-v-b5036166><!--[--><span class="vpi-sun sun" data-v-d54b1a18></span><span class="vpi-moon moon" data-v-d54b1a18></span><!--]--></span></span></button></div></div></div><div class="group" data-v-9a218048><div class="item social-links" data-v-9a218048><div class="VPSocialLinks social-links-list" data-v-9a218048 data-v-4803473e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/themusecatcher/front-end-notes" aria-label="github" target="_blank" rel="noopener" data-v-4803473e data-v-adb60df4><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-fc2d6afc data-v-e2d268be><span class="container" data-v-e2d268be><span class="top" data-v-e2d268be></span><span class="middle" data-v-e2d268be></span><span class="bottom" data-v-e2d268be></span></span></button></div></div></div></div><div class="divider" data-v-fc2d6afc><div class="divider-line" data-v-fc2d6afc></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-468fcf2f data-v-9537bf39><div class="container" data-v-9537bf39><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-9537bf39><span class="vpi-align-left menu-icon" data-v-9537bf39></span><span class="menu-text" data-v-9537bf39>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9537bf39 data-v-89a00320><button data-v-89a00320>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-468fcf2f data-v-6aaf4708><div class="curtain" data-v-6aaf4708></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-6aaf4708><span class="visually-hidden" id="sidebar-aria-label" data-v-6aaf4708> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-1a53d730><section class="VPSidebarItem level-0" data-v-1a53d730 data-v-745f914f><div class="item" role="button" tabindex="0" data-v-745f914f><div class="indicator" data-v-745f914f></div><h2 class="text" data-v-745f914f>指引</h2><!----></div><div class="items" data-v-745f914f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-745f914f data-v-745f914f><div class="item" data-v-745f914f><div class="indicator" data-v-745f914f></div><a class="VPLink link link" href="/front-end-notes/plugins/started.html" data-v-745f914f><!--[--><p class="text" data-v-745f914f>开始</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-1a53d730><section class="VPSidebarItem level-0 has-active" data-v-1a53d730 data-v-745f914f><div class="item" role="button" tabindex="0" data-v-745f914f><div class="indicator" data-v-745f914f></div><h2 class="text" data-v-745f914f>MiniProgram</h2><!----></div><div class="items" data-v-745f914f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-745f914f data-v-745f914f><div class="item" data-v-745f914f><div class="indicator" data-v-745f914f></div><a class="VPLink link link" href="/front-end-notes/mobile/notes/miniprogram/No.1.html" data-v-745f914f><!--[--><p class="text" data-v-745f914f>No.1</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-745f914f data-v-745f914f><div class="item" data-v-745f914f><div class="indicator" data-v-745f914f></div><a class="VPLink link link" href="/front-end-notes/mobile/notes/miniprogram/No.2.html" data-v-745f914f><!--[--><p class="text" data-v-745f914f>No.2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-745f914f data-v-745f914f><div class="item" data-v-745f914f><div class="indicator" data-v-745f914f></div><a class="VPLink link link" href="/front-end-notes/mobile/notes/miniprogram/No.3.html" data-v-745f914f><!--[--><p class="text" data-v-745f914f>No.3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-745f914f data-v-745f914f><div class="item" data-v-745f914f><div class="indicator" data-v-745f914f></div><a class="VPLink link link" href="/front-end-notes/mobile/notes/miniprogram/No.4.html" data-v-745f914f><!--[--><p class="text" data-v-745f914f>No.4</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-745f914f data-v-745f914f><div class="item" data-v-745f914f><div class="indicator" data-v-745f914f></div><a class="VPLink link link" href="/front-end-notes/mobile/notes/miniprogram/No.5.html" data-v-745f914f><!--[--><p class="text" data-v-745f914f>No.5</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-1a53d730><section class="VPSidebarItem level-0" data-v-1a53d730 data-v-745f914f><div class="item" role="button" tabindex="0" data-v-745f914f><div class="indicator" data-v-745f914f></div><h2 class="text" data-v-745f914f>H5</h2><!----></div><div class="items" data-v-745f914f><!--[--><div class="VPSidebarItem level-1 is-link" data-v-745f914f data-v-745f914f><div class="item" data-v-745f914f><div class="indicator" data-v-745f914f></div><a class="VPLink link link" href="/front-end-notes/mobile/notes/h5/No.1.html" data-v-745f914f><!--[--><p class="text" data-v-745f914f>No.1</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-468fcf2f data-v-930bc55a><div class="VPDoc has-sidebar has-aside" data-v-930bc55a data-v-5d6f55a2><!--[--><!--]--><div class="container" data-v-5d6f55a2><div class="aside" data-v-5d6f55a2><div class="aside-curtain" data-v-5d6f55a2></div><div class="aside-container" data-v-5d6f55a2><div class="aside-content" data-v-5d6f55a2><div class="VPDocAside" data-v-5d6f55a2 data-v-19fd3d41><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-19fd3d41 data-v-72035e55><div class="content" data-v-72035e55><div class="outline-marker" data-v-72035e55></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-72035e55>On this page</div><ul class="VPDocOutlineItem root" data-v-72035e55 data-v-ab8f9489><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-19fd3d41></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-5d6f55a2><div class="content-container" data-v-5d6f55a2><!--[--><!--]--><main class="main" data-v-5d6f55a2><div style="position:relative;" class="vp-doc _front-end-notes_mobile_notes_miniprogram_No_2" data-v-5d6f55a2><div><h1 id="taro3-vue3-typescript-less" tabindex="-1"><code>Taro3</code> &amp; <code>Vue3</code> &amp; <code>typescript</code> &amp; <code>less</code> <a class="header-anchor" href="#taro3-vue3-typescript-less" aria-label="Permalink to &quot;`Taro3` &amp; `Vue3` &amp; `typescript` &amp; `less`&quot;">​</a></h1><div class="back-top-placeholder" style="display:none;" data-v-ede46b26><!--teleport start--><!--teleport end--></div><h2 id="参考文档" tabindex="-1">参考文档 <a class="header-anchor" href="#参考文档" aria-label="Permalink to &quot;参考文档&quot;">​</a></h2><ul><li><a href="https://taro.zone/" target="_blank" rel="noreferrer">Taro官网</a></li><li><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/" target="_blank" rel="noreferrer">微信官方文档</a></li><li><a href="https://mp.weixin.qq.com/" target="_blank" rel="noreferrer">微信公众平台</a></li><li><a href="https://nutui.jd.com/taro/vue/4x/#/zh-CN/guide/start" target="_blank" rel="noreferrer">Nut UI</a></li></ul><h2 id="微信小程序预览文件" tabindex="-1">微信小程序预览文件 <a class="header-anchor" href="#微信小程序预览文件" aria-label="Permalink to &quot;微信小程序预览文件&quot;">​</a></h2><ul><li>需首先在<a href="https://mp.weixin.qq.com/" target="_blank" rel="noreferrer">微信公众平台</a> &gt; 开发管理下 &gt; 配置 <code>downloadFile</code>合法域名</li><li>使用 <a href="https://taro-docs.jd.com/docs/apis/network/download/downloadFile" target="_blank" rel="noreferrer"><code>Taro.downloadFile(option)</code></a> 下载文件资源到本地。客户端直接发起一个 HTTPS GET 请求，返回文件的本地临时路径，单次下载允许的最大文件为 50MB。</li><li>然后使用 <a href="https://taro-docs.jd.com/docs/apis/files/openDocument" target="_blank" rel="noreferrer"><code>Taro.openDocument(option)</code></a> 新开页面打开文档进行预览</li></ul><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onPDF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;加载中&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mask: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">downloadFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: url,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;result&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openDocument</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        filePath: res.tempFilePath,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;打开文档成功&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        fail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showToast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;打开文档失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            mask: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hideLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hideLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showToast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;下载文档失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mask: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @tap</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;onPDF(url)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;协议预览&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">nut-button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="微信小程序下拉刷新" tabindex="-1">微信小程序<a href="https://taro-docs.jd.com/docs/composition-api#usepulldownrefresh" target="_blank" rel="noreferrer">下拉刷新</a> <a class="header-anchor" href="#微信小程序下拉刷新" aria-label="Permalink to &quot;微信小程序[下拉刷新](https://taro-docs.jd.com/docs/composition-api#usepulldownrefresh)&quot;">​</a></h2><p>在页面的 <code>index.config.ts</code> 中写入配置：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> definePageConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  navigationBarTitleText: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;首页&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  enablePullDownRefresh: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Taro, { usePullDownRefresh } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@tarojs/taro&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usePullDownRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;onPullDownRefresh&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 模拟接口调用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stopPullDownRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或者</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usePullDownRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 接口调用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stopPullDownRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="微信小程序上拉加载分页数据" tabindex="-1">微信小程序上拉加载分页数据 <a class="header-anchor" href="#微信小程序上拉加载分页数据" aria-label="Permalink to &quot;微信小程序上拉加载分页数据&quot;">​</a></h2><p>监听用户上拉触底事件。</p><p>可以在全局配置的 <code>window</code> 选项中或页面配置中设置触发距离 <code>onReachBottomDistance</code> 在触发距离内滑动期间，本事件只会被触发一次</p><p><code>onReachBottomDistance</code> 默认 <code>50</code>，页面上拉触底事件触发时距页面底部距离，单位为 <code>px</code></p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useReachBottom } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@tarojs/taro&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useReachBottom</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;onReachBottom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 调用接口获取新数据</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="微信小程序使用分包" tabindex="-1">微信小程序<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html" target="_blank" rel="noreferrer">使用分包</a> <a class="header-anchor" href="#微信小程序使用分包" aria-label="Permalink to &quot;微信小程序[使用分包](https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages/basic.html)&quot;">​</a></h2><h3 id="打包原则" tabindex="-1">打包原则 <a class="header-anchor" href="#打包原则" aria-label="Permalink to &quot;打包原则&quot;">​</a></h3><ul><li>声明 <code>subpackages</code> 后，将按 <code>subpackages</code> <code>配置路径进行打包，subpackages</code> 配置路径外的目录将被打包到主包中</li><li>主包也可以有自己的 <code>pages</code>，即最外层的 <code>pages</code> 字段。</li><li><code>subpackage</code> 的根目录不能是另外一个 <code>subpackage</code> 内的子目录</li><li><code>tabBar</code> 页面必须在主包内</li></ul><h3 id="引用原则" tabindex="-1">引用原则 <a class="header-anchor" href="#引用原则" aria-label="Permalink to &quot;引用原则&quot;">​</a></h3><ul><li><code>packageA</code> 无法 <code>require</code> <code>packageB</code> <code>JS</code> 文件，但可以 <code>require</code> 主包、<code>packageA</code> 内的 <code>JS</code> 文件；使用 分包异步化 时不受此条限制</li><li><code>packageA</code> 无法 <code>import</code> <code>packageB</code> 的 <code>template</code>，但可以 <code>require</code> 主包、<code>packageA</code> 内的 <code>template</code></li><li><code>packageA</code> 无法使用 <code>packageB</code> 的资源，但可以使用主包、<code>packageA</code> 内的资源</li></ul><p>在 <code>src/app.config.ts</code> 的 <code>subpackages</code> 字段中加入相关配置：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineAppConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  pages: [ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// tabBar 页面必须在主包内</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;pages/index/index&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;pages/find/index&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;pages/my/index&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subpackages: [</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      root: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;packageA&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 分包根目录</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      pages: [ </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 分包页面路径</span></span>
<span class="line highlighted"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;login/index&#39;</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      root: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;packageB&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      pages: [</span></span>
<span class="line highlighted"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;apple/index&#39;</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="微信小程序转发分享-useshareappmessage" tabindex="-1">微信小程序转发分享 <a href="https://taro-docs.jd.com/docs/composition-api#useshareappmessage" target="_blank" rel="noreferrer">useShareAppMessage</a> <a class="header-anchor" href="#微信小程序转发分享-useshareappmessage" aria-label="Permalink to &quot;微信小程序转发分享 [useShareAppMessage](https://taro-docs.jd.com/docs/composition-api#useshareappmessage)&quot;">​</a></h2><p><a href="https://developers.weixin.qq.com/miniprogram/dev/platform-capabilities/miniapp/component/onShareAppMessage.html" target="_blank" rel="noreferrer">onShareAppMessage</a></p><p>监听用户点击页面内转发按钮（<code>Button</code> 组件 <code>openType=&#39;share&#39;</code>）或右上角菜单“转发”按钮的行为，并自定义转发内容。</p><div class="tip custom-block"><p class="custom-block-title">注意：</p><ul><li>使用时，必须为页面配置 <code>enableShareAppMessage: true</code>。（<strong>修改配置文件后请重新编译项目</strong>）</li><li>当 <code>onShareAppMessage</code> 没有触发时，请在页面配置中设置 <code>enableShareAppMessage: true</code></li><li>只有定义了此事件处理函数，右上角菜单才会显示“转发”按钮</li></ul></div><h3 id="_1-全局转发分享" tabindex="-1">1. 全局转发分享 <a class="header-anchor" href="#_1-全局转发分享" aria-label="Permalink to &quot;1. 全局转发分享&quot;">​</a></h3><br><p>在 <code>src/app.ts</code> 中加入以下配置：</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LOGO </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./images/logo.jpg&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShareType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  from</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;button&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;menu&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 页面内转发按钮 | 右上角转发菜单</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  target</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> object</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// @ts-ignore</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> originPage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Page</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;originPage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, originPage)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// @ts-ignore</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Page</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pageConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pageConfig&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pageConfig)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 设置全局默认分享</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> globalShareConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    onShareAppMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShareType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;index share&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (res.from </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 来自页面内转发按钮</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res.target)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;纵横命运之上&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 转发时的描述文字 默认为当前小程序名称</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // path: &#39;/pages/index/index&#39;,</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 转发路径，当前页面 path ，必须是以 / 开头的完整路径</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 使用默认截图 设置转发显示的图片，可以使用网络图片 自定义图片路径，可以是本地文件路径、代码包文件路径或者网络图片路径。支持 PNG 及 JPG 。显示图片长宽比是 5:4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        imageUrl: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LOGO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 相对路径图片</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // imageUrl: &#39;https://image-path.png&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 网络图片</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 将全局分享配置合并到当前页面的配置中</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> newPageConfig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, globalShareConfig, pageConfig)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 使用原始Page函数创建页面实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> originPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newPageConfig)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-单个页面自定义转发分享" tabindex="-1">2. 单个页面自定义转发分享 <a class="header-anchor" href="#_2-单个页面自定义转发分享" aria-label="Permalink to &quot;2. 单个页面自定义转发分享&quot;">​</a></h3><br><h4 id="例如-在首页设置自定义转发分享" tabindex="-1">例如：在首页设置自定义转发分享 <a class="header-anchor" href="#例如-在首页设置自定义转发分享" aria-label="Permalink to &quot;例如：在首页设置自定义转发分享&quot;">​</a></h4><br><p>在 <code>pages/index/index.config.ts</code> 加入相关配置:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> definePageConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  navigationBarTitleText: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;首页&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  enableShareAppMessage: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>在 <code>pages/index/index.vue</code> 自定义转发分享:</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useShareAppMessage } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@tarojs/taro&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useShareAppMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;share&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (res.from </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;button&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 来自页面内转发按钮</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res.target)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;纵横命运之上&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/pages/index/index&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open-type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;share&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;分享&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="微信小程序监听页面返回-跳转指定页面" tabindex="-1">微信小程序监听页面返回，跳转指定页面 <a class="header-anchor" href="#微信小程序监听页面返回-跳转指定页面" aria-label="Permalink to &quot;微信小程序监听页面返回，跳转指定页面&quot;">​</a></h2><ul><li><a href="https://taro-docs.jd.com/docs/apis/framework/getCurrentPages" target="_blank" rel="noreferrer">Taro.getCurrentPages()</a></li></ul><p>获取当前页面栈。数组中第一个元素为首页，最后一个元素为当前页面。</p><div class="tip custom-block"><p class="custom-block-title">注意：</p><ul><li>不要尝试修改页面栈，会导致路由以及页面状态错误。</li><li>不要在 <code>App.onLaunch</code> 的时候调用 <code>getCurrentPages()</code>，此时 <code>page</code> 还没有生成。</li></ul></div><p><img src="/front-end-notes/assets/image-3.BE8o5z1e.png" alt="alt text"></p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Taro, { useUnload } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@tarojs/taro&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentPages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pages&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, pages)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useUnload</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;subpackages/order/index&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pages[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].route)) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">redirectTo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/subpackages/order/index&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="微信小程序网络请求封装taro-request-option" tabindex="-1">微信小程序网络请求封装<a href="https://taro-docs.jd.com/docs/apis/network/request/" target="_blank" rel="noreferrer">Taro.request(option)</a> <a class="header-anchor" href="#微信小程序网络请求封装taro-request-option" aria-label="Permalink to &quot;微信小程序网络请求封装[Taro.request(option)](https://taro-docs.jd.com/docs/apis/network/request/)&quot;">​</a></h2><ul><li>在 <code>src/http</code> 下创建 <code>request.ts</code>, 写入如下配置：</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Taro </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@tarojs/taro&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { encryptData } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./encrypt&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 请求数据加密，可选</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;NODE_ENV&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;TARO_APP_PROXY&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TARO_APP_PROXY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> baseUrl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TARO_APP_PROXY</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;OPTIONS&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;GET&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HEAD&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;POST&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;PUT&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;PATCH&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DELETE&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;TRACE&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CONNECT&#39;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  header</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  loadingTitle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  [key: string]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RequestParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">header</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">loadingTitle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">toastDuration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> params</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: loadingTitle,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mask: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      data: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">encryptData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, method),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      url: baseUrl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      method: method,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      timeout: timeout,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      header: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;content-type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/json;charset=UTF-8,text/plain,*/*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">header</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      success</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 接口调用成功的回调函数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hideLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;success&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (res.data.message.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 具体参考接口响应的数据结构定义</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res.data.data)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res.data.data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res.data.data, success: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res.data.message.message)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ message: res.data.message.message, success: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          showError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res.data.message.message, toastDuration)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      fail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hideLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fail&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ message: res, success: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        showError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;请求失败&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, toastDuration)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 接口调用结束的回调函数（调用成功、失败都会执行）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;complete&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hideLoading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;catch err&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ message: e.errMsg, success: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      showError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e.errMsg, toastDuration)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> showError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">duration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showToast</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: message,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    icon: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;none&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;error&#39; &#39;success&#39; &#39;loading&#39; &#39;none&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    duration: duration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>在 <code>src/http</code> 下创建 <code>index.ts</code> 并导出通用请求：</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { request } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/http/request&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">parameter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: url,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;GET&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data: parameter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    args: args</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> postAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">parameter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: url,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;POST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data: parameter,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    args: args,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    header: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &#39;Content-Type&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;application/x-www-form-urlencoded&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>在页面内进行网络请求</li></ul><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Taro, { useLoad, usePullDownRefresh } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@tarojs/taro&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getAction } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/http&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  detail: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/api/detail&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> detailData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useLoad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getDetail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usePullDownRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getDetail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Taro.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stopPullDownRefresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getDetail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getAction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(url.detail, { id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">res</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;detail&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (res.success) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      detailData.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fail message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res.message)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-5d6f55a2 data-v-fe25c922><!--[--><!--]--><div class="edit-info" data-v-fe25c922><div class="edit-link" data-v-fe25c922><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/themusecatcher/front-end-notes/tree/master/docs/mobile/notes/miniprogram/No.2.md" target="_blank" rel="noreferrer" data-v-fe25c922><!--[--><span class="vpi-square-pen edit-link-icon" data-v-fe25c922></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-fe25c922><p class="VPLastUpdated" data-v-fe25c922 data-v-14a66bea>最后更新于: <time datetime="2025-05-13T05:19:12.000Z" data-v-14a66bea></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-fe25c922><span class="visually-hidden" id="doc-footer-aria-label" data-v-fe25c922>Pager</span><div class="pager" data-v-fe25c922><a class="VPLink link pager-link prev" href="/front-end-notes/mobile/notes/miniprogram/No.1.html" data-v-fe25c922><!--[--><span class="desc" data-v-fe25c922>Previous page</span><span class="title" data-v-fe25c922>No.1</span><!--]--></a></div><div class="pager" data-v-fe25c922><a class="VPLink link pager-link next" href="/front-end-notes/mobile/notes/miniprogram/No.3.html" data-v-fe25c922><!--[--><span class="desc" data-v-fe25c922>Next page</span><span class="title" data-v-fe25c922>No.3</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-468fcf2f data-v-da74470d><div class="container" data-v-da74470d><p class="message" data-v-da74470d>Released under the MIT License.</p><p class="copyright" data-v-da74470d>Copyright © 2023-present the Muse Catcher</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"css_notes_no.1.md\":\"B7rJnrqL\",\"css_notes_no.10.md\":\"BmeR5QrB\",\"css_notes_no.2.md\":\"NIhOjd09\",\"css_notes_no.3.md\":\"BBeV0HiR\",\"css_notes_no.4.md\":\"ZGIzQhgW\",\"css_notes_no.5.md\":\"D0Yjissj\",\"css_notes_no.6.md\":\"BfpK2Lzr\",\"css_notes_no.7.md\":\"MhBHgk2s\",\"css_notes_no.8.md\":\"QtzW6sMF\",\"css_notes_no.9.md\":\"BIETPX9w\",\"css_sass_no.1.md\":\"CGf9myfV\",\"css_sass_no.2.md\":\"HKcPUzA2\",\"css_started.md\":\"B09t0wRO\",\"engineering_notes_no.1.md\":\"B9x_WmaC\",\"engineering_notes_no.2.md\":\"D5XpzkQM\",\"engineering_notes_no.3.md\":\"BXZmY3sp\",\"engineering_notes_no.4.md\":\"Cl2DHaZG\",\"engineering_notes_no.5.md\":\"CqAOJQGn\",\"engineering_notes_no.6.md\":\"DIl11m13\",\"engineering_started.md\":\"Bc71pmZx\",\"html_notes_no.1.md\":\"kEOovLaR\",\"html_notes_no.2.md\":\"BtOlQJ3v\",\"html_notes_no.3.md\":\"OCo_-TXI\",\"html_started.md\":\"BcfJRxcA\",\"http_notes_no.1.md\":\"DEmnGqoV\",\"http_notes_no.2.md\":\"DdMZ5xRZ\",\"http_notes_no.3.md\":\"DdY6pKas\",\"http_notes_no.4.md\":\"KW5i46aX\",\"http_started.md\":\"C9MrxGip\",\"index.md\":\"DwxyOCRo\",\"javascript_notes_no.1.md\":\"AxwvTh-q\",\"javascript_notes_no.10.md\":\"DXmGnASL\",\"javascript_notes_no.11.md\":\"CUcCEhBj\",\"javascript_notes_no.12.md\":\"BoQ6DWgw\",\"javascript_notes_no.13.md\":\"I5YNdupC\",\"javascript_notes_no.14.md\":\"Coigxpxa\",\"javascript_notes_no.15.md\":\"BlTcdvvu\",\"javascript_notes_no.16.md\":\"-Q8PzjXv\",\"javascript_notes_no.17.md\":\"Dsi2S9eA\",\"javascript_notes_no.18.md\":\"DqBgbTFX\",\"javascript_notes_no.2.md\":\"CIftTdmd\",\"javascript_notes_no.3.md\":\"CIdEPjDf\",\"javascript_notes_no.4.md\":\"fGvdaabC\",\"javascript_notes_no.5.md\":\"Bkx7mGXI\",\"javascript_notes_no.6.md\":\"B2P3WV50\",\"javascript_notes_no.7.md\":\"CeZ8tKi7\",\"javascript_notes_no.8.md\":\"DtIyeAa8\",\"javascript_notes_no.9.md\":\"DlQKWX06\",\"javascript_started.md\":\"Bzpix8u4\",\"mobile_notes_h5_no.1.md\":\"Ba733BbM\",\"mobile_notes_miniprogram_no.1.md\":\"BeoobL9K\",\"mobile_notes_miniprogram_no.2.md\":\"Co2MQf0I\",\"mobile_notes_miniprogram_no.3.md\":\"GeyrQUGc\",\"mobile_notes_miniprogram_no.4.md\":\"CYGyif-8\",\"mobile_notes_miniprogram_no.5.md\":\"CL1jXVAS\",\"mobile_started.md\":\"Bv0f3wg9\",\"plugins_plugin_draggable.md\":\"ebrsFOxD\",\"plugins_plugin_ganttchart.md\":\"D0pEOveS\",\"plugins_plugin_gaugechart.md\":\"LMa7VGIi\",\"plugins_plugin_lazyload.md\":\"BBYYvo0i\",\"plugins_plugin_treechart.md\":\"OJQD_2CM\",\"plugins_started.md\":\"B09z7dji\",\"typescript_notes_no.1.md\":\"DP_rylp3\",\"typescript_notes_no.2.md\":\"CCCfnrhk\",\"typescript_notes_no.3.md\":\"VLL7Qqcw\",\"typescript_notes_no.4.md\":\"Dna58jMr\",\"typescript_notes_no.5.md\":\"Dh4pwj8v\",\"typescript_started.md\":\"GYbIlul9\",\"vue2_notes_no.1.md\":\"D5lv-fdd\",\"vue2_notes_no.2.md\":\"D5YCbSfq\",\"vue2_notes_no.3.md\":\"Jvj5VBrL\",\"vue2_notes_no.4.md\":\"BX8XBYRM\",\"vue2_notes_no.5.md\":\"DqCIO4_P\",\"vue2_started.md\":\"D4X43Rk3\",\"vue3_notes_no.1.md\":\"ZEFGqBa2\",\"vue3_notes_no.2.md\":\"B2XkTC7-\",\"vue3_notes_no.3.md\":\"CZGet9VB\",\"vue3_notes_no.4.md\":\"q1cz5dhm\",\"vue3_started.md\":\"CGS_1I1L\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Front-end Notes\",\"description\":\"前端笔记文档\",\"base\":\"/front-end-notes/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/amazing-icon.svg\",\"editLink\":{\"pattern\":\"https://github.com/themusecatcher/front-end-notes/tree/master/docs/:path\",\"text\":\"在 GitHub 上编辑此页面\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/themusecatcher/front-end-notes\"}],\"search\":{\"provider\":\"local\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2023-present the Muse Catcher\"},\"nav\":[{\"text\":\"JavaScript\",\"link\":\"/javascript/started\",\"activeMatch\":\"/javascript/\"},{\"text\":\"TypeScript\",\"link\":\"/typescript/started\",\"activeMatch\":\"/typescript/\"},{\"text\":\"HTML\",\"link\":\"/html/started\",\"activeMatch\":\"/html/\"},{\"text\":\"CSS\",\"link\":\"/css/started\",\"activeMatch\":\"/css/\"},{\"text\":\"Vue2\",\"link\":\"/vue2/started\",\"activeMatch\":\"/vue2/\"},{\"text\":\"Vue3\",\"link\":\"/vue3/started\",\"activeMatch\":\"/vue3/\"},{\"text\":\"Mobile\",\"link\":\"/mobile/started\",\"activeMatch\":\"/mobile/\"},{\"text\":\"Engineering\",\"link\":\"/engineering/started\",\"activeMatch\":\"/engineering/\"},{\"text\":\"Http\",\"link\":\"/http/started\",\"activeMatch\":\"/http/\"},{\"text\":\"Plugins\",\"link\":\"/plugins/started\",\"activeMatch\":\"/plugins/\"},{\"text\":\"Links\",\"items\":[{\"text\":\"My Github\",\"link\":\"https://github.com/themusecatcher\"},{\"text\":\"My CSDN\",\"link\":\"https://themusecatcher.blog.csdn.net\"},{\"text\":\"Amazing UI\",\"link\":\"https://themusecatcher.github.io/vue-amazing-ui/\"},{\"text\":\"Naive UI\",\"link\":\"https://www.naiveui.com/zh-CN/dark\"},{\"text\":\"Naive Admin\",\"link\":\"https://www.naiveadmin.com/\"},{\"text\":\"Naive Ui Admin\",\"link\":\"https://docs.naiveadmin.com/\"},{\"text\":\"Ant Design Vue\",\"link\":\"https://www.antdv.com/docs/vue/introduce-cn\"},{\"text\":\"Element Plus\",\"link\":\"https://element-plus.org/zh-CN/\"},{\"text\":\"Arco Design Vue\",\"link\":\"https://arco.design/vue/docs/start\"},{\"items\":[{\"text\":\"Vue\",\"link\":\"https://cn.vuejs.org/\"},{\"text\":\"TypeScript\",\"link\":\"https://ts.nodejs.cn/docs/\"},{\"text\":\"Vite\",\"link\":\"https://cn.vitejs.dev/\"},{\"text\":\"Rollup\",\"link\":\"https://cn.rollupjs.org/\"},{\"text\":\"Less\",\"link\":\"https://less.bootcss.com/\"},{\"text\":\"VitePress\",\"link\":\"https://vitepress.dev/\"},{\"text\":\"Markdown\",\"link\":\"https://markdown.com.cn/\"},{\"text\":\"npm\",\"link\":\"https://www.npmjs.com/\"},{\"text\":\"pnpm\",\"link\":\"https://www.pnpm.cn/\"}]}]},{\"text\":\"Docs\",\"items\":[{\"text\":\"Vue 2 Docs\",\"link\":\"https://v2.cn.vuejs.org/v2/guide/\"},{\"text\":\"Vue 3 Docs\",\"link\":\"https://cn.vuejs.org/guide/introduction.html\"},{\"text\":\"VueUse\",\"link\":\"https://vueuse.org/\"},{\"text\":\"TypeScript Docs\",\"link\":\"https://www.tslang.cn/docs/home.html\"},{\"text\":\"MDN Web Docs\",\"link\":\"https://developer.mozilla.org/zh-CN/\"},{\"text\":\"Less Docs\",\"link\":\"https://less.bootcss.com/\"},{\"text\":\"Lodash Docs\",\"link\":\"https://www.lodashjs.com/\"}]}],\"sidebar\":{\"/javascript/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/javascript/started\"}]},{\"text\":\"JavaScript Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/javascript/notes/No.1\"},{\"text\":\"No.2\",\"link\":\"/javascript/notes/No.2\"},{\"text\":\"No.3\",\"link\":\"/javascript/notes/No.3\"},{\"text\":\"No.4\",\"link\":\"/javascript/notes/No.4\"},{\"text\":\"No.5\",\"link\":\"/javascript/notes/No.5\"},{\"text\":\"No.6\",\"link\":\"/javascript/notes/No.6\"},{\"text\":\"No.7\",\"link\":\"/javascript/notes/No.7\"},{\"text\":\"No.8\",\"link\":\"/javascript/notes/No.8\"},{\"text\":\"No.9\",\"link\":\"/javascript/notes/No.9\"},{\"text\":\"No.10\",\"link\":\"/javascript/notes/No.10\"},{\"text\":\"No.11\",\"link\":\"/javascript/notes/No.11\"},{\"text\":\"No.12\",\"link\":\"/javascript/notes/No.12\"},{\"text\":\"No.13\",\"link\":\"/javascript/notes/No.13\"},{\"text\":\"No.14\",\"link\":\"/javascript/notes/No.14\"},{\"text\":\"No.15\",\"link\":\"/javascript/notes/No.15\"},{\"text\":\"No.16\",\"link\":\"/javascript/notes/No.16\"},{\"text\":\"No.17\",\"link\":\"/javascript/notes/No.17\"},{\"text\":\"No.18\",\"link\":\"/javascript/notes/No.18\"}]}],\"/typescript/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/typescript/started\"}]},{\"text\":\"TypeScript Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/typescript/notes/No.1\"},{\"text\":\"No.2\",\"link\":\"/typescript/notes/No.2\"},{\"text\":\"No.3\",\"link\":\"/typescript/notes/No.3\"},{\"text\":\"No.4\",\"link\":\"/typescript/notes/No.4\"},{\"text\":\"No.5\",\"link\":\"/typescript/notes/No.5\"}]}],\"/html/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/html/started\"}]},{\"text\":\"HTML Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/html/notes/No.1\"},{\"text\":\"No.2\",\"link\":\"/html/notes/No.2\"},{\"text\":\"No.3\",\"link\":\"/html/notes/No.3\"}]}],\"/css/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/css/started\"}]},{\"text\":\"CSS Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/css/notes/No.1\"},{\"text\":\"No.2\",\"link\":\"/css/notes/No.2\"},{\"text\":\"No.3\",\"link\":\"/css/notes/No.3\"},{\"text\":\"No.4\",\"link\":\"/css/notes/No.4\"},{\"text\":\"No.5\",\"link\":\"/css/notes/No.5\"},{\"text\":\"No.6\",\"link\":\"/css/notes/No.6\"},{\"text\":\"No.7\",\"link\":\"/css/notes/No.7\"},{\"text\":\"No.8\",\"link\":\"/css/notes/No.8\"},{\"text\":\"No.9\",\"link\":\"/css/notes/No.9\"}]},{\"text\":\"SASS Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/css/sass/No.1\"},{\"text\":\"No.2\",\"link\":\"/css/sass/No.2\"}]}],\"/vue2/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/vue2/started\"}]},{\"text\":\"Vue2 Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/vue2/notes/No.1\"},{\"text\":\"No.2\",\"link\":\"/vue2/notes/No.2\"},{\"text\":\"No.3\",\"link\":\"/vue2/notes/No.3\"},{\"text\":\"No.4\",\"link\":\"/vue2/notes/No.4\"}]}],\"/vue3/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/vue3/started\"}]},{\"text\":\"Vue3 Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/vue3/notes/No.1\"},{\"text\":\"No.2\",\"link\":\"/vue3/notes/No.2\"},{\"text\":\"No.3\",\"link\":\"/vue3/notes/No.3\"},{\"text\":\"No.4\",\"link\":\"/vue3/notes/No.4\"}]}],\"/mobile/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/plugins/started\"}]},{\"text\":\"MiniProgram\",\"items\":[{\"text\":\"No.1\",\"link\":\"/mobile/notes/miniprogram/No.1\"},{\"text\":\"No.2\",\"link\":\"/mobile/notes/miniprogram/No.2\"},{\"text\":\"No.3\",\"link\":\"/mobile/notes/miniprogram/No.3\"},{\"text\":\"No.4\",\"link\":\"/mobile/notes/miniprogram/No.4\"},{\"text\":\"No.5\",\"link\":\"/mobile/notes/miniprogram/No.5\"}]},{\"text\":\"H5\",\"items\":[{\"text\":\"No.1\",\"link\":\"/mobile/notes/h5/No.1\"}]}],\"/engineering/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/engineering/started\"}]},{\"text\":\"Engineering Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/engineering/notes/No.1\"},{\"text\":\"No.2\",\"link\":\"/engineering/notes/No.2\"},{\"text\":\"No.3\",\"link\":\"/engineering/notes/No.3\"},{\"text\":\"No.4\",\"link\":\"/engineering/notes/No.4\"},{\"text\":\"No.5\",\"link\":\"/engineering/notes/No.5\"}]}],\"/http/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/http/started\"}]},{\"text\":\"Http Notes\",\"items\":[{\"text\":\"No.1\",\"link\":\"/http/notes/No.1\"},{\"text\":\"No.2\",\"link\":\"/http/notes/No.2\"},{\"text\":\"No.3\",\"link\":\"/http/notes/No.3\"},{\"text\":\"No.4\",\"link\":\"/http/notes/No.4\"}]}],\"/plugins/\":[{\"text\":\"指引\",\"items\":[{\"text\":\"开始\",\"link\":\"/plugins/started\"}]},{\"text\":\"Plugins Use\",\"items\":[{\"text\":\"拖拽 Draggable\",\"link\":\"/plugins/plugin/draggable\"},{\"text\":\"引擎图 GaugeChart\",\"link\":\"/plugins/plugin/gaugechart\"},{\"text\":\"懒加载 Lazyload\",\"link\":\"/plugins/plugin/lazyload\"},{\"text\":\"树图 TreeChart\",\"link\":\"/plugins/plugin/treechart\"},{\"text\":\"甘特图 GanttChart\",\"link\":\"/plugins/plugin/ganttchart\"}]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>