# Note 3

## 如何清理源码里面没有被应用的代码，主要是 JS、TS、CSS 代码

### 针对 `JS`、`TS` 代码

1. [ESlint](https://eslint.nodejs.cn/)（在源码中进行检测并提示）、[Terser](https://terser.org/)（打包后自动完成一些裁剪）：读取源码文件 -> 生成抽象语法树（`AST`） -> 分析 -> ...     都只能针对 `JS` 文件不支持 `CSS` 且只能是单模块（单文件），例如一个模块导出，单另一个模块未使用，这种情况无法处理。
2. 打包构建工具（如 `Webpack`、`Rollup`）的树摇优化（`Tree Shaking`）功能：读取源码文件 -> 分析模块依赖关系 -> 生成新的 `AST` 并进行优化 -> 生成新的代码 -> ...    也只能支持 `JS` 或 `TS`（编译后也是 `JS`）不支持 `CSS`，且必须是 `ESM` 的模块化标准（不支持 `CommonJS`），支持多模块（多文件），例如一个模块导出，单另一个模块未使用，这种情况也可以处理。   不支持动态导入，比如：`require` 或 `ESM` 的 `import()` 方式。因为它是静态分析，即只能在编译时态进行静态分析。

### 针对 `CSS` 代码

1. 使用 [PurgeCSS](https://purgecss.com/)，对整个工程代码进行分析找到未被使用的类，即未被应用的代码，然后裁剪掉
