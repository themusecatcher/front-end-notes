import{_ as k,C as h,c as d,o as r,j as s,G as n,ac as e,a,w as l}from"./chunks/framework.CtEZafqV.js";const E="/front-end-notes/assets/image-2.Dg5OyXAF.png",o="/front-end-notes/assets/image-3.BVhCBCjZ.png",g="/front-end-notes/assets/image-4.CcJsP3ih.png",c="/front-end-notes/assets/image-5.DEdfP66p.png",B=JSON.parse('{"title":"Note 2","description":"","frontmatter":{},"headers":[],"relativePath":"javascript/notes/No.2.md","filePath":"javascript/notes/No.2.md","lastUpdated":1765249719000}'),y={name:"javascript/notes/No.2.md"},F={tabindex:"0"};function u(v,i,C,b,m,A){const p=h("BackTop"),t=h("Tag");return r(),d("div",null,[i[55]||(i[55]=s("h1",{id:"note-2",tabindex:"-1"},[a("Note 2 "),s("a",{class:"header-anchor",href:"#note-2","aria-label":'Permalink to "Note 2"'},"â€‹")],-1)),n(p),i[56]||(i[56]=e('<h2 id="å‘æŒ‡å®šå…ƒç´ æ·»åŠ äº‹ä»¶å¥æŸ„-ç›‘å¬äº‹ä»¶-eventtarget-addeventlistener" tabindex="-1">å‘æŒ‡å®šå…ƒç´ æ·»åŠ äº‹ä»¶å¥æŸ„ï¼ˆç›‘å¬äº‹ä»¶ï¼‰<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener" target="_blank" rel="noreferrer"><code>EventTarget.addEventListener()</code></a> <a class="header-anchor" href="#å‘æŒ‡å®šå…ƒç´ æ·»åŠ äº‹ä»¶å¥æŸ„-ç›‘å¬äº‹ä»¶-eventtarget-addeventlistener" aria-label="Permalink to &quot;å‘æŒ‡å®šå…ƒç´ æ·»åŠ äº‹ä»¶å¥æŸ„ï¼ˆç›‘å¬äº‹ä»¶ï¼‰[`EventTarget.addEventListener()`](https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener)&quot;">â€‹</a></h2><p>è¯¥æ–¹æ³•å°†æŒ‡å®šçš„ç›‘å¬å™¨æ³¨å†Œåˆ° <code>EventTarget</code> ä¸Šï¼Œå½“è¯¥å¯¹è±¡è§¦å‘æŒ‡å®šçš„äº‹ä»¶æ—¶ï¼ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚äº‹ä»¶ç›®æ ‡å¯ä»¥æ˜¯ä¸€ä¸ªæ–‡æ¡£ä¸Šçš„å…ƒç´  <code>Element</code>ã€<code>Document</code> å’Œ <code>Window</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»»ä½•æ”¯æŒäº‹ä»¶çš„å¯¹è±¡ï¼ˆæ¯”å¦‚ <code>XMLHttpRequest</code>ï¼‰ã€‚</p><div class="tip custom-block"><p class="custom-block-title">å¤‡æ³¨</p><p>æ¨èä½¿ç”¨ <code>addEventListener()</code> æ¥æ³¨å†Œä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç†ç”±å¦‚ä¸‹ï¼š</p><ul><li>å®ƒå…è®¸ä¸ºä¸€ä¸ªäº‹ä»¶æ·»åŠ å¤šä¸ªç›‘å¬å™¨ã€‚ç‰¹åˆ«æ˜¯å¯¹åº“ã€<code>JavaScript</code> æ¨¡å—å’Œå…¶ä»–éœ€è¦å…¼å®¹ç¬¬ä¸‰æ–¹åº“/æ’ä»¶çš„ä»£ç æ¥è¯´ï¼Œè¿™ä¸€åŠŸèƒ½å¾ˆæœ‰ç”¨ã€‚</li><li>ç›¸æ¯”äº <code>onXYZ</code> å±æ€§ç»‘å®šæ¥è¯´ï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´ç²¾ç»†çš„æ‰‹æ®µæ¥æ§åˆ¶ <code>listener</code> çš„è§¦å‘é˜¶æ®µã€‚ï¼ˆå³å¯ä»¥é€‰æ‹©æ•è·æˆ–è€…å†’æ³¡ï¼‰ã€‚</li><li>å®ƒå¯¹ä»»ä½•äº‹ä»¶éƒ½æœ‰æ•ˆï¼Œè€Œä¸ä»…ä»…æ˜¯ <code>HTML</code> æˆ– <code>SVG</code> å…ƒç´ ã€‚</li></ul></div><p><code>addEventListener()</code> çš„å·¥ä½œåŸç†æ˜¯å°†å®ç° <code>EventListener</code> çš„å‡½æ•°æˆ–å¯¹è±¡æ·»åŠ åˆ°è°ƒç”¨å®ƒçš„ <code>EventTarget</code> ä¸Šçš„æŒ‡å®šäº‹ä»¶ç±»å‹çš„äº‹ä»¶ä¾¦å¬å™¨åˆ—è¡¨ä¸­ã€‚å¦‚æœè¦ç»‘å®šçš„å‡½æ•°æˆ–å¯¹è±¡å·²ç»è¢«æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼Œè¯¥å‡½æ•°æˆ–å¯¹è±¡ä¸ä¼šè¢«å†æ¬¡æ·»åŠ ã€‚</p><div class="tip custom-block"><p class="custom-block-title">å¤‡æ³¨</p><p>å¦‚æœå…ˆå‰å‘äº‹ä»¶ä¾¦å¬å™¨åˆ—è¡¨ä¸­æ·»åŠ è¿‡ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¹¶ä¸”åœ¨ä¹‹åçš„ä»£ç ä¸­è°ƒç”¨ <code>addEventListener</code> æ¥æ·»åŠ ä¸€ä¸ªåŠŸèƒ½å®Œå…¨ç›¸åŒçš„åŒ¿åå‡½æ•°ï¼Œé‚£ä¹ˆä¹‹åçš„è¿™ä¸ªåŒ¿åå‡½æ•°ä¹Ÿä¼šè¢«æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚</p><p>å®é™…ä¸Šï¼Œå³ä½¿ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ä»£ç æ¥å®šä¹‰ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä»ç„¶å­˜åœ¨åŒºåˆ«ï¼Œåœ¨å¾ªç¯ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚åœ¨ä½¿ç”¨è¯¥æ–¹æ³•çš„æƒ…å†µä¸‹ï¼ŒåŒ¿åå‡½æ•°çš„é‡å¤å®šä¹‰ä¼šå¸¦æ¥è®¸å¤šéº»çƒ¦ï¼Œè¯¦è§ä¸‹æ–‡ä¸­çš„å†…å­˜é—®é¢˜ä¸€èŠ‚ã€‚</p></div><p>å½“ä¸€ä¸ª <code>EventListener</code> åœ¨ <code>EventTarget</code> æ­£åœ¨å¤„ç†äº‹ä»¶çš„æ—¶å€™è¢«æ³¨å†Œåˆ° <code>EventTarget</code> ä¸Šï¼Œå®ƒä¸ä¼šè¢«ç«‹å³è§¦å‘ï¼Œä½†å¯èƒ½åœ¨äº‹ä»¶æµåé¢çš„äº‹ä»¶è§¦å‘é˜¶æ®µè¢«è§¦å‘ï¼Œä¾‹å¦‚å¯èƒ½åœ¨æ•è·é˜¶æ®µæ·»åŠ ï¼Œç„¶ååœ¨å†’æ³¡é˜¶æ®µè¢«è§¦å‘ã€‚</p><ul><li>è¯­æ³•ï¼š</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type, listener)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type, listener, options)</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type, listener, useCapture)</span></span></code></pre></div>',8)),s("ul",null,[s("li",null,[i[27]||(i[27]=a("å‚æ•°ï¼š ",-1)),s("ul",null,[i[26]||(i[26]=e("<li><p><code>type</code>ï¼šè¡¨ç¤ºç›‘å¬äº‹ä»¶ç±»å‹çš„<strong>å¤§å°å†™æ•æ„Ÿ</strong>çš„å­—ç¬¦ä¸²ã€‚</p></li><li><p><code>listener</code>ï¼šå½“æ‰€ç›‘å¬çš„äº‹ä»¶ç±»å‹è§¦å‘æ—¶ï¼Œä¼šæ¥æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶é€šçŸ¥ï¼ˆå®ç°äº† <code>Event</code> æ¥å£çš„å¯¹è±¡ï¼‰å¯¹è±¡ã€‚<code>listener</code> å¿…é¡»æ˜¯ä¸€ä¸ªå®ç°äº† <code>EventListener</code> æ¥å£çš„å¯¹è±¡ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æœ‰å…³å›è°ƒæœ¬èº«çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…äº‹ä»¶ç›‘å¬å›è°ƒ</p></li>",2)),s("li",null,[s("p",null,[i[1]||(i[1]=s("code",null,"options",-1)),i[2]||(i[2]=a()),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[0]||(i[0]=[a("å¯é€‰",-1)])]),_:1}),i[3]||(i[3]=a(" ä¸€ä¸ªæŒ‡å®šæœ‰å…³ ",-1)),i[4]||(i[4]=s("code",null,"listener",-1)),i[5]||(i[5]=a(" å±æ€§çš„å¯é€‰å‚æ•°å¯¹è±¡ã€‚å¯ç”¨çš„é€‰é¡¹å¦‚ä¸‹ï¼š",-1))]),s("ul",null,[s("li",null,[s("p",null,[i[7]||(i[7]=s("code",null,"capture",-1)),i[8]||(i[8]=a()),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[6]||(i[6]=[a("å¯é€‰",-1)])]),_:1})]),i[9]||(i[9]=s("p",null,[a("ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º "),s("code",null,"listener"),a(" ä¼šåœ¨è¯¥ç±»å‹çš„äº‹ä»¶æ•è·é˜¶æ®µä¼ æ’­åˆ°è¯¥ "),s("code",null,"EventTarget"),a(" æ—¶è§¦å‘ã€‚")],-1))]),s("li",null,[s("p",null,[i[11]||(i[11]=s("code",null,"once",-1)),i[12]||(i[12]=a()),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[10]||(i[10]=[a("å¯é€‰",-1)])]),_:1})]),i[13]||(i[13]=s("p",null,[a("ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤º "),s("code",null,"listener"),a(" åœ¨æ·»åŠ ä¹‹åæœ€å¤šåªè°ƒç”¨ä¸€æ¬¡ã€‚å¦‚æœä¸º "),s("code",null,"true"),a("ï¼Œ"),s("code",null,"listener"),a(" ä¼šåœ¨å…¶è¢«è°ƒç”¨ä¹‹åè‡ªåŠ¨ç§»é™¤ã€‚")],-1))]),s("li",null,[s("p",null,[i[15]||(i[15]=s("code",null,"passive",-1)),i[16]||(i[16]=a()),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[14]||(i[14]=[a("å¯é€‰",-1)])]),_:1})]),i[17]||(i[17]=e('<p>ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œè¡¨ç¤º <code>listener</code> æ°¸è¿œä¸ä¼šè°ƒç”¨ <code>preventDefault()</code>ã€‚å¦‚æœ <code>listener</code> ä»ç„¶è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°ï¼Œå®¢æˆ·ç«¯å°†ä¼šå¿½ç•¥å®ƒå¹¶æŠ›å‡ºä¸€ä¸ªæ§åˆ¶å°è­¦å‘Šã€‚æŸ¥çœ‹<a href="#ä½¿ç”¨-passive-æ”¹å–„æ»šå±æ€§èƒ½">ä½¿ç”¨ <code>passive</code> æ”¹å–„æ»šå±æ€§èƒ½</a>ä»¥äº†è§£æ›´å¤šã€‚</p>',1))]),s("li",null,[s("p",null,[i[19]||(i[19]=s("code",null,"signal",-1)),i[20]||(i[20]=a()),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[18]||(i[18]=[a("å¯é€‰",-1)])]),_:1})]),i[21]||(i[21]=s("p",null,[s("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/AbortSignal",target:"_blank",rel:"noreferrer"},[s("code",null,"AbortSignal")]),a("ï¼Œè¯¥ "),s("code",null,"AbortSignal"),a(" çš„ "),s("code",null,"abort()"),a(" æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œç›‘å¬å™¨ä¼šè¢«ç§»é™¤ã€‚")],-1))])])]),s("li",null,[s("p",null,[i[23]||(i[23]=s("code",null,"useCapture",-1)),i[24]||(i[24]=a()),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[22]||(i[22]=[a("å¯é€‰",-1)])]),_:1})]),i[25]||(i[25]=e("<p>ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåœ¨ <code>DOM</code> æ ‘ä¸­æ³¨å†Œäº† <code>listener</code> çš„å…ƒç´ ï¼Œæ˜¯å¦è¦å…ˆäºå®ƒä¸‹é¢çš„ <code>EventTarget</code> è°ƒç”¨è¯¥ <code>listener</code>ã€‚å½“ <code>useCapture</code>ï¼ˆè®¾ä¸º <code>true</code>ï¼‰æ—¶ï¼Œæ²¿ç€ <code>DOM</code> æ ‘å‘ä¸Šå†’æ³¡çš„äº‹ä»¶ä¸ä¼šè§¦å‘ <code>listener</code>ã€‚å½“ä¸€ä¸ªå…ƒç´ åµŒå¥—äº†å¦ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ä¸¤ä¸ªå…ƒç´ éƒ½å¯¹åŒä¸€äº‹ä»¶æ³¨å†Œäº†ä¸€ä¸ªå¤„ç†å‡½æ•°æ—¶ï¼Œæ‰€å‘ç”Ÿçš„äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·æ˜¯ä¸¤ç§ä¸åŒçš„äº‹ä»¶ä¼ æ’­æ–¹å¼ã€‚äº‹ä»¶ä¼ æ’­æ¨¡å¼å†³å®šäº†å…ƒç´ ä»¥å“ªä¸ªé¡ºåºæ¥æ”¶äº‹ä»¶ã€‚è¿›ä¸€æ­¥çš„è§£é‡Šå¯ä»¥æŸ¥çœ‹ <code>DOM Level 3</code> äº‹ä»¶åŠ <code>JavaScript</code> äº‹ä»¶é¡ºåºæ–‡æ¡£ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œ<code>useCapture</code> é»˜è®¤ä¸º <code>false</code>ã€‚</p>",1))])])])]),i[57]||(i[57]=e(`<p><code>document.addEventListener()</code> æ–¹æ³•ç”¨äºå‘æ–‡æ¡£æ·»åŠ äº‹ä»¶å¥æŸ„ã€‚</p><h3 id="ä½¿ç”¨-passive-æ”¹å–„æ»šå±æ€§èƒ½" tabindex="-1">ä½¿ç”¨ passive æ”¹å–„æ»šå±æ€§èƒ½ <a class="header-anchor" href="#ä½¿ç”¨-passive-æ”¹å–„æ»šå±æ€§èƒ½" aria-label="Permalink to &quot;ä½¿ç”¨ passive æ”¹å–„æ»šå±æ€§èƒ½&quot;">â€‹</a></h3><blockquote><p>å°† <code>passive</code> è®¾ä¸º <code>true</code> å¯ä»¥å¯ç”¨æ€§èƒ½ä¼˜åŒ–ï¼Œå¹¶å¯å¤§å¹…æ”¹å–„åº”ç”¨æ€§èƒ½ï¼Œæ­£å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p></blockquote><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯¥ç‰¹æ€§ */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> passiveIfSupported </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">defineProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;passive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        passiveIfSupported </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { passive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;scroll&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /* do something */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä¸èƒ½ä½¿ç”¨ event.preventDefault()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  passiveIfSupported</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="option-æ”¯æŒçš„å®‰å…¨æ£€æµ‹" tabindex="-1"><code>option</code> æ”¯æŒçš„å®‰å…¨æ£€æµ‹ <a class="header-anchor" href="#option-æ”¯æŒçš„å®‰å…¨æ£€æµ‹" aria-label="Permalink to &quot;\`option\` æ”¯æŒçš„å®‰å…¨æ£€æµ‹&quot;">â€‹</a></h3><br><p>åœ¨æ—§ç‰ˆæœ¬çš„ <code>DOM</code> çš„è§„å®šä¸­ï¼Œ<code>addEventListener()</code> çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦åœ¨æ•è·é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå¾ˆæ˜æ˜¾éœ€è¦æ›´å¤šçš„é€‰é¡¹ã€‚ä¸å…¶åœ¨æ–¹æ³•ä¹‹ä¸­æ·»åŠ æ›´å¤šå‚æ•°ï¼ˆä¼ é€’å¯é€‰å€¼å°†ä¼šå˜å¾—å¼‚å¸¸å¤æ‚ï¼‰ï¼Œå€’ä¸å¦‚æŠŠç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸ºä¸€ä¸ªåŒ…å«äº†å„ç§å±æ€§çš„å¯¹è±¡ï¼Œè¿™äº›å±æ€§çš„å€¼ç”¨æ¥è¢«é…ç½®åˆ é™¤äº‹ä»¶ä¾¦å¬å™¨çš„è¿‡ç¨‹ã€‚</p><p>å› ä¸ºæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼ˆä»¥åŠä¸€äº›ç›¸å¯¹ä¸ç®—å¤è€çš„ï¼‰ä»ç„¶å‡å®šç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å¸ƒå°”å€¼ï¼Œä½ éœ€è¦ç¼–å†™ä¸€äº›ä»£ç æ¥æœ‰æ•ˆåœ°å¤„ç†è¿™ç§æƒ…å†µã€‚ä½ å¯ä»¥å¯¹æ¯ä¸€ä¸ªä½ æ„Ÿå…´è¶£çš„ <code>options</code> å€¼è¿›è¡Œç‰¹æ€§æ£€æµ‹ã€‚</p><p>å¦‚æœä½ æƒ³æ£€æµ‹ <code>passive</code> å€¼ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> passiveSupported </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> passive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // è¯¥å‡½æ•°ä¼šåœ¨æµè§ˆå™¨å°è¯•è®¿é—® passive å€¼æ—¶è¢«è°ƒç”¨ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      passiveSupported </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  passiveSupported </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="ç¤ºä¾‹" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h3><blockquote><p>æ·»åŠ ä¸€ä¸ªå¯è¢«ç§»é™¤çš„ç›‘å¬å™¨</p></blockquote><p>è¿™ä¸ªä¾‹å­ç”¨æ¥å±•ç¤ºå¦‚ä½•ä½¿ç”¨ <code>addEventListenter()</code> æ·»åŠ ä¸€ä¸ªå¯è¢« <code>AbortSignal</code> ç§»é™¤çš„ä¾¦å¬å™¨ã€‚</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">table</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;outside&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">td</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;t1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;one&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">td</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">td</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;t2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;two&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">td</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">table</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸º table æ·»åŠ å¯è¢«ç§»é™¤çš„äº‹ä»¶ç›‘å¬å™¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> el</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;outside&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;click&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, modifyText, { signal: controller.signal })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ”¹å˜ t2 å†…å®¹çš„å‡½æ•°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> modifyText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> t2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;t2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (t2.firstChild.nodeValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;three&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    t2.firstChild.nodeValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;two&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    t2.firstChild.nodeValue </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;three&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å½“å€¼å˜ä¸º &quot;three&quot; åï¼Œç§»é™¤ç›‘å¬å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">æç¤º</p><p>å¯ä»¥ä½¿ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/removeEventListener" target="_blank" rel="noreferrer">document.removeEventListener()</a> æ–¹æ³•æ¥ç§»é™¤ <code>addEventListener()</code> æ–¹æ³•æ·»åŠ çš„äº‹ä»¶å¥æŸ„ã€‚</p></div><div class="tip custom-block"><p class="custom-block-title">æç¤º</p><p>ä½¿ç”¨ <code>element.addEventListener()</code> æ–¹æ³•ä¸ºæŒ‡å®šå…ƒç´ æ·»åŠ äº‹ä»¶å¥æŸ„ã€‚</p></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç¦ç”¨ H5 é¡µé¢çš„ä¸‹æ‹‰åˆ·æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;touchmove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.touchMove, { passive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">touchMove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // è‡ªåŠ¨æ¸…ç†è‡ªå·±ï¼Œé¿å…å†…å­˜æ³„æ¼</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hook:beforeDestroy&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;touchmove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.touchMove)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·åˆ†åˆ«ç”±å¾®è½¯å’Œç½‘æ™¯å…¬å¸æå‡ºï¼Œè¿™ä¸¤ä¸ªæ¦‚å¿µéƒ½æ˜¯ä¸ºäº†è§£å†³é¡µé¢ä¸­äº‹ä»¶æµï¼ˆäº‹ä»¶å‘ç”Ÿé¡ºåºï¼‰çš„é—®é¢˜ã€‚</strong></p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;parent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;child&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Click me!&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>å¦‚æœå­å…ƒç´  p å’Œçˆ¶å…ƒç´  div éƒ½æœ‰ä¸€ä¸ª click çš„å¤„ç†å‡½æ•°ï¼Œé‚£ä¹ˆå“ªä¸€ä¸ªå‡½æ•°ä¼šé¦–å…ˆè¢«è§¦å‘å‘¢ï¼Ÿ</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å¾®è½¯å’Œç½‘æ™¯æå‡ºäº†ä¸¤ç§å‡ ä¹å®Œå…¨ç›¸åçš„æ¦‚å¿µï¼Œå¾®è½¯æå‡ºäº†åä¸ºäº‹ä»¶å†’æ³¡(<code>event bubbling</code>)çš„äº‹ä»¶æµï¼Œç½‘æ™¯æå‡ºå¦ä¸€ç§äº‹ä»¶æµåä¸ºäº‹ä»¶æ•è·(<code>event capturing</code>)ã€‚</p><ul><li>äº‹ä»¶å†’æ³¡å¯ä»¥ç†è§£ä¸ºæŠŠä¸€é¢—çŸ³å¤´æŠ•å…¥æ°´ä¸­ï¼Œæ³¡æ³¡ä¼šä¸€ç›´ä»æ°´åº•å†’å‡ºæ°´é¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œäº‹ä»¶ä¼šä»æœ€å†…å±‚çš„å…ƒç´ å¼€å§‹å‘ç”Ÿï¼Œä¸€ç›´å‘ä¸Šä¼ æ’­ï¼Œç›´åˆ°documentå¯¹è±¡ã€‚å› æ­¤ä¸Šé¢çš„ä¾‹å­åœ¨äº‹ä»¶å†’æ³¡çš„æ¦‚å¿µä¸‹å‘ç”Ÿclickäº‹ä»¶çš„é¡ºåºåº”è¯¥æ˜¯ï¼š<code>p -&gt; div -&gt; body -&gt; html -&gt; document</code></li><li>äº‹ä»¶æ•è·ä¸äº‹ä»¶å†’æ³¡ç›¸åï¼Œäº‹ä»¶ä¼šä»æœ€å¤–å±‚å¼€å§‹å‘ç”Ÿï¼Œç›´åˆ°æœ€å†…å±‚çš„å…ƒç´ ã€‚ä¸Šé¢çš„ä¾‹å­åœ¨äº‹ä»¶æ•è·çš„æ¦‚å¿µä¸‹å‘ç”Ÿclickäº‹ä»¶çš„é¡ºåºåº”è¯¥æ˜¯ï¼š<code>document -&gt; html -&gt; body -&gt; div -&gt; p</code></li></ul><div class="tip custom-block"><p class="custom-block-title">æ³¨</p><p>å¯¹äºäº‹ä»¶ä»£ç†æ¥è¯´ï¼Œåœ¨äº‹ä»¶æ•è·æˆ–è€…äº‹ä»¶å†’æ³¡é˜¶æ®µå¤„ç†å¹¶æ²¡æœ‰æ˜æ˜¾çš„ä¼˜åŠ£ä¹‹åˆ†ï¼Œä½†æ˜¯ç”±äºäº‹ä»¶å†’æ³¡çš„äº‹ä»¶æµæ¨¡å‹è¢«æ‰€æœ‰ä¸»æµçš„æµè§ˆå™¨å…¼å®¹ï¼Œä»å…¼å®¹æ€§è§’åº¦æ¥è¯´è¿˜æ˜¯å»ºè®®å¤§å®¶ä½¿ç”¨äº‹ä»¶å†’æ³¡æ¨¡å‹ã€‚</p></div><p>é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼š</p><ul><li>ç»™å­çº§åŠ  <code>event.stopPropagation()</code> åªé˜»æ­¢äº‹ä»¶å¾€ä¸Šå†’æ³¡ï¼Œä¸é˜»æ­¢äº‹ä»¶æœ¬èº«ï¼ˆé»˜è®¤äº‹ä»¶ï¼‰</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> el</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;child&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.event</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stopPropagation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><ul><li>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ <code>return false</code> ä¸ä»…é˜»æ­¢äº†äº‹ä»¶å¾€ä¸Šå†’æ³¡ï¼Œè€Œä¸”é˜»æ­¢äº†äº‹ä»¶æœ¬èº«ï¼ˆé»˜è®¤äº‹ä»¶ï¼‰</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.event</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><ul><li>è®©è§¦å‘äº‹ä»¶çš„å…ƒç´ ç­‰äºç»‘å®šäº‹ä»¶çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥é˜»æ­¢äº‹ä»¶å†’æ³¡</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onclick</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (event.target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.currentTarget) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;child&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼ˆå³äº‹ä»¶æœ¬èº«ï¼‰ <ol><li><code>event.preventDefault()</code></li><li><code>return false</code></li></ol></li></ul><h2 id="ç§»é™¤äº‹ä»¶ç›‘å¬å™¨-eventtarget-removeeventlistener" tabindex="-1">ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/removeEventListener" target="_blank" rel="noreferrer">EventTarget.removeEventListener()</a> <a class="header-anchor" href="#ç§»é™¤äº‹ä»¶ç›‘å¬å™¨-eventtarget-removeeventlistener" aria-label="Permalink to &quot;ç§»é™¤äº‹ä»¶ç›‘å¬å™¨ [EventTarget.removeEventListener()](https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/removeEventListener)&quot;">â€‹</a></h2><p><code>EventTarget</code> çš„ <code>removeEventListener()</code> æ–¹æ³•å¯ä»¥åˆ é™¤ä½¿ç”¨ <code>EventTarget.addEventListener()</code> æ–¹æ³•æ·»åŠ çš„äº‹ä»¶ã€‚å¯ä»¥ä½¿ç”¨äº‹ä»¶ç±»å‹ï¼Œäº‹ä»¶ä¾¦å¬å™¨å‡½æ•°æœ¬èº«ï¼Œä»¥åŠå¯èƒ½å½±å“åŒ¹é…è¿‡ç¨‹çš„å„ç§å¯é€‰æ‹©çš„é€‰é¡¹çš„ç»„åˆæ¥æ ‡è¯†è¦åˆ é™¤çš„äº‹ä»¶ä¾¦å¬å™¨ã€‚å‚è§ä¸‹æ–‡çš„åŒ¹é…è¦åˆ é™¤çš„äº‹ä»¶ç›‘å¬å™¨ã€‚</p><p>è°ƒç”¨ <code>removeEventListener()</code> æ—¶ï¼Œè‹¥ä¼ å…¥çš„å‚æ•°ä¸èƒ½ç”¨äºç¡®å®šå½“å‰æ³¨å†Œè¿‡çš„ä»»ä½•ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œè¯¥å‡½æ•°ä¸ä¼šèµ·ä»»ä½•ä½œç”¨ã€‚</p><p>å¦‚æœä¸€ä¸ª <code>EventTarget</code> ä¸Šçš„äº‹ä»¶ç›‘å¬å™¨åœ¨å¦ä¸€ç›‘å¬å™¨å¤„ç†è¯¥äº‹ä»¶æ—¶è¢«ç§»é™¤ï¼Œé‚£ä¹ˆå®ƒå°†ä¸èƒ½è¢«äº‹ä»¶è§¦å‘ã€‚ä¸è¿‡ï¼Œå®ƒå¯ä»¥è¢«é‡æ–°ç»‘å®šã€‚</p><div class="warning custom-block"><p class="custom-block-title">è­¦å‘Š</p><p>å¦‚æœåŒä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨åˆ†åˆ«ä¸ºâ€œäº‹ä»¶æ•è·ï¼ˆ<code>capture</code> ä¸º <code>true</code>ï¼‰â€å’Œâ€œäº‹ä»¶å†’æ³¡ï¼ˆ<code>capture</code> ä¸º <code>false</code>ï¼‰â€æ³¨å†Œäº†ä¸€æ¬¡ï¼Œè¿™ä¸¤ä¸ªç‰ˆæœ¬çš„ç›‘å¬å™¨éœ€è¦åˆ†åˆ«ç§»é™¤ã€‚ç§»é™¤æ•è·ç›‘å¬å™¨ä¸ä¼šå½±å“éæ•è·ç‰ˆæœ¬çš„ç›¸åŒç›‘å¬å™¨ï¼Œåä¹‹äº¦ç„¶ã€‚</p></div><h3 id="è¯­æ³•" tabindex="-1">è¯­æ³• <a class="header-anchor" href="#è¯­æ³•" aria-label="Permalink to &quot;è¯­æ³•&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type, listener)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type, listener, options)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(type, listener, useCapture)</span></span></code></pre></div><h3 id="å‚æ•°" tabindex="-1">å‚æ•° <a class="header-anchor" href="#å‚æ•°" aria-label="Permalink to &quot;å‚æ•°&quot;">â€‹</a></h3>`,40)),s("ul",null,[i[39]||(i[39]=s("li",null,[s("code",null,"type"),a("ï¼šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºéœ€è¦ç§»é™¤çš„äº‹ä»¶ç±»å‹ã€‚")],-1)),i[40]||(i[40]=s("li",null,[s("code",null,"listener"),a("ï¼šéœ€è¦ä»ç›®æ ‡äº‹ä»¶ç§»é™¤çš„äº‹ä»¶ç›‘å¬å™¨å‡½æ•°ã€‚")],-1)),s("li",null,[i[29]||(i[29]=s("code",null,"options",-1)),i[30]||(i[30]=a()),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[28]||(i[28]=[a("å¯é€‰",-1)])]),_:1}),i[31]||(i[31]=a("ï¼šä¸€ä¸ªæŒ‡å®šäº‹ä»¶ä¾¦å¬å™¨ç‰¹å¾çš„å¯é€‰å¯¹è±¡ã€‚å¯é€‰é¡¹æœ‰ï¼š ",-1)),i[32]||(i[32]=s("ul",null,[s("li",null,[s("code",null,"capture"),a(": ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡å®šéœ€è¦ç§»é™¤çš„äº‹ä»¶ç›‘å¬å™¨å‡½æ•°æ˜¯å¦ä¸ºæ•è·ç›‘å¬å™¨ã€‚å¦‚æœæœªæŒ‡å®šæ­¤å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º "),s("code",null,"false"),a("ã€‚")])],-1))]),s("li",null,[i[34]||(i[34]=s("code",null,"capture",-1)),i[35]||(i[35]=a(": ",-1)),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[33]||(i[33]=[a("å¯é€‰",-1)])]),_:1}),i[36]||(i[36]=a("ï¼šä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡å®šéœ€è¦ç§»é™¤çš„äº‹ä»¶ç›‘å¬å™¨å‡½æ•°æ˜¯å¦ä¸ºæ•è·ç›‘å¬å™¨ã€‚å¦‚æœæœªæŒ‡å®šæ­¤å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º ",-1)),i[37]||(i[37]=s("code",null,"false",-1)),i[38]||(i[38]=a("ã€‚",-1))])]),i[58]||(i[58]=e(`<h3 id="ç¤ºä¾‹-1" tabindex="-1">ç¤ºä¾‹ <a class="header-anchor" href="#ç¤ºä¾‹-1" aria-label="Permalink to &quot;ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;body&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> clickTarget</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click-target&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mouseOverTarget</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mouse-over-target&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> toggle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeBackgroundYellow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  body.style.backgroundColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> toggle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;white&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;yellow&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  toggle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">toggle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">clickTarget.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, makeBackgroundYellow, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mouseOverTarget.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mouseover&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  clickTarget.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, makeBackgroundYellow, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="ä½¿ç”¨-passive-æ”¹å–„æ»šå±æ€§èƒ½-1" tabindex="-1">ä½¿ç”¨ passive æ”¹å–„æ»šå±æ€§èƒ½ <a class="header-anchor" href="#ä½¿ç”¨-passive-æ”¹å–„æ»šå±æ€§èƒ½-1" aria-label="Permalink to &quot;ä½¿ç”¨ passive æ”¹å–„æ»šå±æ€§èƒ½&quot;">â€‹</a></h2><p>å°† <code>addEventListener</code> çš„ <code>passive</code> é€‰é¡¹è®¾ä¸º <code>true</code>ï¼Œå…¶æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒåŸç†æ˜¯ï¼š<strong>å®ƒé€šè¿‡å‘æµè§ˆå™¨åšå‡ºä¸€ä¸ªä¸å¯æ’¤é”€çš„æ‰¿è¯ºâ€”â€”â€œæˆ‘ç»ä¸ä¼šè°ƒç”¨ <code>event.preventDefault()</code> æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºâ€ï¼Œä»è€Œå…è®¸æµè§ˆå™¨è·³è¿‡ç­‰å¾…JavaScriptæ‰§è¡Œçš„æ­¥éª¤ï¼Œç«‹å³å¯åŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ˆå¦‚æ»šåŠ¨ã€è§¦æ‘¸ï¼‰ã€‚</strong></p><p>è¿™è§£å†³äº†æ»šåŠ¨ç­‰è¿ç»­äº‹ä»¶ä¸­æœ€å…³é”®çš„ <strong>â€œé˜»å¡â€é—®é¢˜</strong>ã€‚</p><h3 id="ğŸ”§-å·¥ä½œåŸç†-ä»-é˜»å¡ç­‰å¾…-åˆ°-å¹¶è¡Œæ‰§è¡Œ" tabindex="-1">ğŸ”§ å·¥ä½œåŸç†ï¼šä»â€œé˜»å¡ç­‰å¾…â€åˆ°â€œå¹¶è¡Œæ‰§è¡Œâ€ <a class="header-anchor" href="#ğŸ”§-å·¥ä½œåŸç†-ä»-é˜»å¡ç­‰å¾…-åˆ°-å¹¶è¡Œæ‰§è¡Œ" aria-label="Permalink to &quot;ğŸ”§ å·¥ä½œåŸç†ï¼šä»â€œé˜»å¡ç­‰å¾…â€åˆ°â€œå¹¶è¡Œæ‰§è¡Œâ€&quot;">â€‹</a></h3><ol><li><p><strong>æ­£å¸¸æ¨¡å¼ï¼ˆæœªè®¾ç½® <code>passive: true</code>ï¼‰</strong></p><ul><li><strong>æµè§ˆå™¨çš„å›°å¢ƒ</strong>ï¼šå½“ç”¨æˆ·å¼€å§‹æ»šåŠ¨æ—¶ï¼Œæµè§ˆå™¨ä¼šè§¦å‘ <code>touchmove</code> æˆ– <code>wheel</code> äº‹ä»¶ã€‚ä½†åœ¨æ‰§è¡Œäº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼ˆå®é™…æ»šåŠ¨é¡µé¢ï¼‰<strong>ä¹‹å‰</strong>ï¼Œæµè§ˆå™¨å¿…é¡»<strong>ç­‰å¾…</strong>ä»¥ç¡®è®¤ç»‘å®šçš„äº‹ä»¶ç›‘å¬å™¨<strong>æ˜¯å¦ä¼šè°ƒç”¨ <code>event.preventDefault()</code></strong> æ¥å–æ¶ˆæ»šåŠ¨ã€‚</li><li><strong>é€ æˆçš„åæœ</strong>ï¼šå³ä½¿ä½ çš„ç›‘å¬å™¨ä»€ä¹ˆä¹Ÿä¸åšï¼Œæµè§ˆå™¨ä¹Ÿå¿…é¡»èŠ±æ—¶é—´æ£€æŸ¥ã€‚å¯¹äºåƒæ»šåŠ¨è¿™æ ·æ¯ç§’å¯èƒ½è§¦å‘æ•°åæ¬¡çš„é«˜é¢‘äº‹ä»¶ï¼Œè¿™ç§â€œç­‰å¾…-æ£€æŸ¥â€çš„å¾®å°å»¶è¿Ÿç´¯ç§¯èµ·æ¥ï¼Œå°±ä¼šå¯¼è‡´æ»šåŠ¨çš„å“åº”å˜å¾—<strong>å¡é¡¿ã€ä¸è·Ÿæ‰‹</strong>ï¼Œå°¤å…¶æ˜¯åœ¨ç§»åŠ¨ç«¯ã€‚</li></ul></li><li><p><strong>Passive æ¨¡å¼ï¼ˆè®¾ç½® <code>passive: true</code>ï¼‰</strong></p><ul><li><strong>å¼€å‘è€…çš„æ‰¿è¯º</strong>ï¼šå½“ä½ è®¾ç½® <code>{ passive: true }</code> æ—¶ï¼Œä½ ç­‰äºå‘æµè§ˆå™¨æ‰¿è¯ºï¼šâ€œæˆ‘æ³¨å†Œçš„è¿™ä¸ªç›‘å¬å™¨æ°¸è¿œä¸ä¼šè°ƒç”¨ <code>event.preventDefault()</code>â€ã€‚</li><li><strong>æµè§ˆå™¨çš„å“åº”</strong>ï¼šæµè§ˆå™¨è·å¾—è¿™ä¸ªä¿è¯åï¼Œå°±å¯ä»¥å®Œå…¨<strong>ä¿¡ä»»ä½ </strong>ã€‚å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œå®ƒä¼š<strong>ç«‹å³ã€åŒæ­¥åœ°</strong>å¼€å§‹æ‰§è¡Œé»˜è®¤è¡Œä¸ºï¼ˆå¦‚æ»šåŠ¨é¡µé¢ï¼‰ï¼ŒåŒæ—¶<strong>å¼‚æ­¥åœ°</strong>å»æ‰§è¡Œä½ çš„<code>JavaScript</code>äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li><li><strong>å…³é”®æ”¹å˜</strong>ï¼šæ»šåŠ¨è¡Œä¸ºä¸å†éœ€è¦ç­‰å¾…<code>JavaScript</code>ã€‚ä»ç”¨æˆ·æ„ŸçŸ¥ä¸Šï¼Œé¡µé¢ä¼šç«‹åˆ»å“åº”è§¦æ‘¸æˆ–æ»šè½®æ“ä½œï¼Œå˜å¾—æå…¶æµç•…ã€‚</li></ul></li></ol><h3 id="ğŸ“ˆ-å¸¦æ¥çš„æ€§èƒ½æ”¶ç›Š" tabindex="-1">ğŸ“ˆ å¸¦æ¥çš„æ€§èƒ½æ”¶ç›Š <a class="header-anchor" href="#ğŸ“ˆ-å¸¦æ¥çš„æ€§èƒ½æ”¶ç›Š" aria-label="Permalink to &quot;ğŸ“ˆ å¸¦æ¥çš„æ€§èƒ½æ”¶ç›Š&quot;">â€‹</a></h3><ol><li><strong>æ¶ˆé™¤æ»šåŠ¨å¡é¡¿</strong>ï¼šè¿™æ˜¯æœ€ç›´æ¥çš„æ”¶ç›Šã€‚ç§»åŠ¨ç«¯çš„ <code>touchmove</code> äº‹ä»¶å’Œæ¡Œé¢çš„ <code>wheel</code> äº‹ä»¶æ˜¯æœ€å¤§å—ç›Šè€…ã€‚è°·æ­Œçš„å¼€å‘è€…æ–‡æ¡£æ›¾æŒ‡å‡ºï¼Œå°†è¿™ç±»äº‹ä»¶çš„ç›‘å¬å™¨è®¾ç½®ä¸º <code>passive</code>ï¼Œå¯ä»¥å°†<strong>æ»šåŠ¨æ€§èƒ½æå‡é«˜è¾¾20å€</strong>ã€‚</li><li><strong>å‡å°‘ä¸»çº¿ç¨‹å‹åŠ›</strong>ï¼šæµè§ˆå™¨çš„ä¸»çº¿ç¨‹éœ€è¦å¤„ç† <code>JavaScript</code>ã€æ ·å¼è®¡ç®—ã€å¸ƒå±€ã€ç»˜åˆ¶ç­‰å¤šé¡¹ä»»åŠ¡ã€‚<code>Passive</code>æ¨¡å¼é€šè¿‡é¿å…â€œæ»šåŠ¨ç­‰å¾…JSâ€è¿™ç§é˜»å¡ï¼Œè§£æ”¾äº†ä¸»çº¿ç¨‹ï¼Œä½¿å…¶èƒ½æ›´é«˜æ•ˆåœ°å¤„ç†å…¶ä»–ä»»åŠ¡ï¼Œæå‡äº†åº”ç”¨çš„æ•´ä½“å“åº”èƒ½åŠ›ã€‚</li><li><strong>ç¬¦åˆç°ä»£æµè§ˆå™¨ä¼˜åŒ–ç­–ç•¥</strong>ï¼šæ­£å› ä¸ºè¢«åŠ¨äº‹ä»¶ç›‘å¬å™¨çš„æ€§èƒ½ä¼˜åŠ¿å¦‚æ­¤æ˜¾è‘—ï¼Œ<strong>Chromeã€Firefoxç­‰ç°ä»£æµè§ˆå™¨ä»æŸä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œå·²ç»å°† <code>touchstart</code> å’Œ <code>touchmove</code> äº‹ä»¶çš„ <code>passive</code> é€‰é¡¹é»˜è®¤ä¸º <code>true</code></strong>ã€‚å¦‚æœä½ åœ¨éœ€è¦è°ƒç”¨ <code>preventDefault()</code> çš„ç›‘å¬å™¨ä¸Šä¸æ˜¾å¼è®¾ç½® <code>{ passive: false }</code>ï¼Œåœ¨æ§åˆ¶å°ç”šè‡³ä¼šçœ‹åˆ°è­¦å‘Šã€‚</li></ol><h3 id="ğŸ’¡-å®è·µå»ºè®®ä¸ä»£ç ç¤ºä¾‹" tabindex="-1">ğŸ’¡ å®è·µå»ºè®®ä¸ä»£ç ç¤ºä¾‹ <a class="header-anchor" href="#ğŸ’¡-å®è·µå»ºè®®ä¸ä»£ç ç¤ºä¾‹" aria-label="Permalink to &quot;ğŸ’¡ å®è·µå»ºè®®ä¸ä»£ç ç¤ºä¾‹&quot;">â€‹</a></h3><ul><li><p><strong>ä½•æ—¶ä½¿ç”¨ <code>passive: true</code></strong></p><ul><li>æ‰€æœ‰<strong>ä¸éœ€è¦é˜»æ­¢é»˜è®¤æ»šåŠ¨</strong>çš„ <code>touchstart</code>ã€<code>touchmove</code>ã€<code>wheel</code> äº‹ä»¶ç›‘å¬å™¨ã€‚</li><li>ä¸»è¦ç”¨äº<strong>æ»šåŠ¨æ€§èƒ½ä¼˜åŒ–</strong>ã€<strong>è§¦æ‘¸æ‰‹åŠ¿åˆ†æ</strong>ï¼ˆå¦‚è®°å½•è½¨è¿¹ï¼‰ç­‰åœºæ™¯ã€‚</li></ul></li><li><p><strong>ä½•æ—¶å¿…é¡»ä½¿ç”¨ <code>passive: false</code></strong></p><ul><li>å½“ä½ <strong>ç¡®å®éœ€è¦</strong>è°ƒç”¨ <code>event.preventDefault()</code> æ—¶ï¼Œä¾‹å¦‚å®ç°ä¸€ä¸ª<strong>è‡ªå®šä¹‰çš„å…¨å±æ¨ªå‘ç”»æ¿</strong>ï¼ˆéœ€è¦é˜»æ­¢é¡µé¢çºµå‘æ»šåŠ¨ï¼‰ã€‚</li></ul></li><li><p><strong>ä»£ç ç¤ºä¾‹</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… ä¼˜åŒ–ï¼šç”¨äºæ”¹å–„æ»šåŠ¨æ€§èƒ½çš„ç›‘å¬å™¨ï¼Œæ— éœ€é˜»æ­¢æ»šåŠ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;touchmove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, handleTouchMove, { passive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// â— æ³¨æ„ï¼šéœ€è¦é˜»æ­¢æ»šåŠ¨çš„ç›‘å¬å™¨ï¼Œå¿…é¡»æ˜ç¡®å£°æ˜</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;touchmove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é˜»æ­¢æ»šåŠ¨ï¼Œå®ç°è‡ªå®šä¹‰æ‹–æ‹½</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... è‡ªå®šä¹‰é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, { passive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¿…é¡»æ˜¾å¼è®¾ç½®ä¸º false</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âš ï¸ è­¦å‘Šï¼šåœ¨é»˜è®¤è¢«å¼ºåˆ¶ä¸º passive çš„äº‹ä»¶ä¸Šå°è¯•é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œä¼šè§¦å‘æ§åˆ¶å°é”™è¯¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;touchmove&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¿™é‡Œä¼šæŠ¥é”™ï¼šUnable to preventDefault inside passive event listener</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li></ul><p>æ€»ç»“æ¥è¯´ï¼Œ<code>passive: true</code> æ˜¯å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸­ä¸€ä¸ªâ€œä½æŠ•å…¥ã€é«˜å›æŠ¥â€çš„å…¸èŒƒã€‚å®ƒé€šè¿‡æ”¹å˜æµè§ˆå™¨å¯¹äº‹ä»¶çš„å¤„ç†æµç¨‹ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†æ»šåŠ¨ç­‰è¿ç»­äº‹ä»¶çš„å»¶è¿Ÿé—®é¢˜ï¼Œæ˜¯æ„å»ºæµç•…ç”¨æˆ·ä½“éªŒçš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ã€‚</p><h2 id="ä¸-requestanimationframe-ç»“åˆä¼˜åŒ–æ»šåŠ¨æ¸²æŸ“" tabindex="-1">ä¸ requestAnimationFrame ç»“åˆä¼˜åŒ–æ»šåŠ¨æ¸²æŸ“ <a class="header-anchor" href="#ä¸-requestanimationframe-ç»“åˆä¼˜åŒ–æ»šåŠ¨æ¸²æŸ“" aria-label="Permalink to &quot;ä¸ requestAnimationFrame ç»“åˆä¼˜åŒ–æ»šåŠ¨æ¸²æŸ“&quot;">â€‹</a></h2><p>å°† <code>requestAnimationFrame</code>ï¼ˆç®€ç§° <strong>rAF</strong>ï¼‰ä¸æ»šåŠ¨æ¸²æŸ“ç›¸ç»“åˆï¼Œæ˜¯è§£å†³æ»šåŠ¨å¡é¡¿ã€å®ç°â€œå¦‚ä¸èˆ¬é¡ºæ»‘â€<code>60FPS</code>ä½“éªŒçš„æ ¸å¿ƒæŠ€æœ¯ã€‚å…¶æ ¹æœ¬åŸç†æ˜¯ï¼š<strong>å°†ç”±æ»šåŠ¨äº‹ä»¶é©±åŠ¨çš„ã€ä¸å¯é¢„æµ‹çš„é«˜é¢‘JSè®¡ç®—ï¼Œå¼ºåˆ¶å¯¹é½åˆ°æµè§ˆå™¨ä¸‹ä¸€æ¬¡ç»˜åˆ¶ä¹‹å‰æ‰§è¡Œï¼Œå®ç°â€œè®¡ç®—â€ä¸â€œæ¸²æŸ“â€çš„åŒæ­¥ï¼Œä»è€Œé¿å…æ‰å¸§ã€‚</strong></p><h3 id="ğŸ¯-æ ¸å¿ƒé—®é¢˜-æ»šåŠ¨äº‹ä»¶çš„-å¤±æ§" tabindex="-1">ğŸ¯ æ ¸å¿ƒé—®é¢˜ï¼šæ»šåŠ¨äº‹ä»¶çš„â€œå¤±æ§â€ <a class="header-anchor" href="#ğŸ¯-æ ¸å¿ƒé—®é¢˜-æ»šåŠ¨äº‹ä»¶çš„-å¤±æ§" aria-label="Permalink to &quot;ğŸ¯ æ ¸å¿ƒé—®é¢˜ï¼šæ»šåŠ¨äº‹ä»¶çš„â€œå¤±æ§â€&quot;">â€‹</a></h3><br><p>åœ¨ä¸ä½¿ç”¨ <code>rAF</code> æ—¶ï¼Œå…¸å‹çš„æ»šåŠ¨æ¸²æŸ“æµç¨‹å­˜åœ¨ä¸¥é‡é—®é¢˜ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;scroll&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 1. åœ¨è¿™é‡Œç›´æ¥è®¡ç®—æ ·å¼æˆ–å¸ƒå±€ï¼ˆå¯èƒ½è§¦å‘å¼ºåˆ¶åŒæ­¥å¸ƒå±€/é‡æ’ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 2. ç´§æ¥ç€æ“ä½œDOMï¼Œä¿®æ”¹æ ·å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>é£é™©</strong>ï¼šæ»šåŠ¨äº‹ä»¶è§¦å‘é¢‘ç‡æé«˜ï¼ˆå¯èƒ½ä¸€å¸§å†…è§¦å‘å¤šæ¬¡ï¼‰ï¼Œè‹¥åœ¨å…¶ä¸­ç›´æ¥è¿›è¡Œ<code>DOM</code>è¯»å†™ï¼Œææ˜“å¼•èµ·<strong>å¸ƒå±€æŠ–åŠ¨</strong>ï¼ˆé¢‘ç¹çš„å¼ºåˆ¶é‡æ’ï¼‰ï¼Œä¸”æ‰§è¡Œæ—¶æœºä¸æµè§ˆå™¨æ¸²æŸ“ç®¡çº¿ä¸åŒæ­¥ï¼Œææ˜“å¯¼è‡´æ‰å¸§ã€‚</p><h3 id="âœ¨-raf-çš„è§£å†³æ–¹æ¡ˆ-ä¸æµè§ˆå™¨æ¸²æŸ“å‘¨æœŸé”æ­¥" tabindex="-1">âœ¨ rAF çš„è§£å†³æ–¹æ¡ˆï¼šä¸æµè§ˆå™¨æ¸²æŸ“å‘¨æœŸé”æ­¥ <a class="header-anchor" href="#âœ¨-raf-çš„è§£å†³æ–¹æ¡ˆ-ä¸æµè§ˆå™¨æ¸²æŸ“å‘¨æœŸé”æ­¥" aria-label="Permalink to &quot;âœ¨ rAF çš„è§£å†³æ–¹æ¡ˆï¼šä¸æµè§ˆå™¨æ¸²æŸ“å‘¨æœŸé”æ­¥&quot;">â€‹</a></h3><br><p><code>rAF</code> çš„è®¾è®¡æ˜¯æµè§ˆå™¨æä¾›çš„â€œä¿¡å·â€ï¼Œå®ƒä¼šåœ¨<strong>ä¸‹ä¸€æ¬¡å±å¹•é‡ç»˜ï¼ˆé€šå¸¸æ˜¯æ¯<code>16.7ms</code>(60fps)ä¸€æ¬¡ï¼‰ä¹‹å‰</strong>è°ƒç”¨ä½ ä¼ å…¥çš„å›è°ƒå‡½æ•°ã€‚è¿™æ˜¯æ¸²æŸ“å‰è¿›è¡Œè§†è§‰å˜æ›´çš„ç†æƒ³æ—¶æœºã€‚</p><h3 id="ğŸ’¡-å…³é”®å®ç°æ¨¡å¼" tabindex="-1">ğŸ’¡ å…³é”®å®ç°æ¨¡å¼ <a class="header-anchor" href="#ğŸ’¡-å…³é”®å®ç°æ¨¡å¼" aria-label="Permalink to &quot;ğŸ’¡ å…³é”®å®ç°æ¨¡å¼&quot;">â€‹</a></h3><br><p>ä»¥ä¸‹æ˜¯å¦‚ä½•åœ¨å®è·µä¸­åº”ç”¨è¿™ä¸€åŸç†çš„å‡ ç§æ¨¡å¼ï¼š</p><p><strong>1. åŸºç¡€æ¨¡å¼ï¼šèŠ‚æµ + rAF</strong><br> è¿™æ˜¯æœ€å¸¸ç”¨ã€æœ€æœ‰æ•ˆçš„ç»„åˆã€‚ç”¨ <code>rAF</code> æ›¿ä»£ <code>setTimeout</code> æˆ– <code>_.throttle</code> è¿›è¡ŒèŠ‚æµï¼Œ<strong>ç¡®ä¿æ»šåŠ¨å¤„ç†å‡½æ•°æ¯å¸§æœ€å¤šæ‰§è¡Œä¸€æ¬¡</strong>ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ticking </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // é”ï¼Œç¡®ä¿ä¸€å¸§å†…åªæ³¨å†Œä¸€æ¬¡rAF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;scroll&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ticking) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ticking </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // åœ¨è¿™é‡Œå®‰å…¨åœ°è¿›è¡ŒDOMè¯»å–å’Œå†™å…¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      updateElementPosition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½ çš„æ¸²æŸ“é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ticking </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>2. é˜²æŠ–æ¨¡å¼ï¼šrAF ç”¨äºæœ€ç»ˆçŠ¶æ€</strong><br> é€‚ç”¨äºæ»šåŠ¨ç»“æŸåéœ€è¦æ›´æ–°ä¸€æ¬¡çš„åœºæ™¯ï¼ˆå¦‚è§¦å‘åŠ è½½æ›´å¤šï¼‰ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> frameId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">element.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;scroll&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (frameId) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    cancelAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(frameId) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å–æ¶ˆæœªæ‰§è¡Œçš„æ›´æ–°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  frameId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // åªåœ¨æ»šåŠ¨â€œå–˜æ¯â€åçš„ä¸‹ä¸€å¸§æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    doHeavyWork</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>3. ç»ˆæä¼˜åŒ–ï¼šè™šæ‹Ÿæ»šåŠ¨ + rAF</strong><br> è¿™ç›´æ¥å›ç­”äº†ä½ ä¹‹å‰å…³äºç™½å±çš„é—®é¢˜ã€‚åœ¨å¿«é€Ÿæ»šåŠ¨æ—¶ï¼Œå°†<strong>å¯è§åŒºåŸŸè®¡ç®—</strong>å’Œ<strong>DOMæ›´æ–°</strong>æ”¾åœ¨ <code>rAF</code> ä¸­æ‰§è¡Œï¼Œå¯ä»¥ç¡®ä¿æµè§ˆå™¨åœ¨æ¸²æŸ“å‰è·å¾—æœ€æ–°çš„è§†å›¾çŠ¶æ€ï¼Œæœ€å¤§ç¨‹åº¦å‡å°‘ç™½å±ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»“åˆè™šæ‹Ÿæ»šåŠ¨çš„ä¼ªä»£ç æ€è·¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> virtualScroll</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">scrollTop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ticking) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ticking </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    requestAnimationFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 1. æ ¹æ® scrollTop è®¡ç®—æ–°çš„èµ·æ­¢ç´¢å¼•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">startIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">endIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> calculateRange</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(scrollTop)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // 2. æ›´æ–°DOMï¼ˆè¿™æ˜¯æœ€è€—æ—¶çš„éƒ¨åˆ†ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      updateVisibleItems</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(startIndex, endIndex)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ticking </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="âš ï¸-é‡è¦çš„æ³¨æ„äº‹é¡¹ä¸é™·é˜±" tabindex="-1">âš ï¸ é‡è¦çš„æ³¨æ„äº‹é¡¹ä¸é™·é˜± <a class="header-anchor" href="#âš ï¸-é‡è¦çš„æ³¨æ„äº‹é¡¹ä¸é™·é˜±" aria-label="Permalink to &quot;âš ï¸ é‡è¦çš„æ³¨æ„äº‹é¡¹ä¸é™·é˜±&quot;">â€‹</a></h3><ol><li><p><strong>ä¸è¦åœ¨ rAF å›è°ƒä¸­è¿›è¡Œè€—æ—¶æ“ä½œ</strong>ï¼š<code>rAF</code> æ˜¯æ¸²æŸ“å‰çš„æœ€åæœºä¼šï¼Œå¦‚æœåœ¨æ­¤å¤„è¿›è¡Œå¤æ‚è®¡ç®—ï¼ˆå¦‚å¤§å‹æ•°ç»„æ’åºã€å¤æ‚å¸ƒå±€æŸ¥è¯¢ï¼‰ï¼Œä¼šç›´æ¥å»¶è¿Ÿæ¸²æŸ“ï¼Œ<strong>æœ¬æœ«å€’ç½®</strong>ã€‚åº”å°†å¤æ‚è®¡ç®—æå‰æˆ–ç§»è‡³ <code>requestIdleCallback</code> æˆ– <code>Web Worker</code>ã€‚</p></li><li><p><strong>åˆ†ç¦»â€œè¯»â€å’Œâ€œå†™â€</strong>ï¼šå³ä½¿åœ¨ <code>rAF</code> ä¸­ï¼Œä¹Ÿåº”éµå¾ªâ€œ<strong>å…ˆè¯»å–æ‰€æœ‰éœ€è¦çš„å¸ƒå±€å±æ€§ï¼Œå†ç»Ÿä¸€è¿›è¡Œå†™å…¥</strong>â€çš„æœ€ä½³å®è·µï¼Œé¿å…å¸ƒå±€æŠ–åŠ¨ã€‚</p></li><li><p><strong>é…åˆ CSS <code>will-change</code> æˆ– <code>transform</code> ä½¿ç”¨</strong>ï¼šå¯¹éœ€è¦é¢‘ç¹æ›´æ–°çš„å…ƒç´ ï¼ˆå¦‚è·Ÿéšæ»šåŠ¨çš„å…ƒç´ ï¼‰ï¼Œä½¿ç”¨ <code>transform: translate3d(x, y, z)</code> å¯ä»¥<strong>å¼€å¯GPUåŠ é€Ÿ</strong>ï¼Œè®©åŠ¨ç”»ç”±åˆæˆå™¨çº¿ç¨‹å¤„ç†ï¼Œå®Œå…¨é¿å¼€ä¸»çº¿ç¨‹çš„é‡æ’é‡ç»˜ï¼Œæ€§èƒ½æœ€ä½³ã€‚</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.positioned-element</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  will-change</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: transform; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* æˆ–ç›´æ¥ä½¿ç”¨ transform */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li><li><p><strong>è€ƒè™‘å…¼å®¹æ€§ä¸é™çº§</strong>ï¼šä½¿ç”¨å‡½æ•°åŒ…è£…ä»¥ç¡®ä¿å…¼å®¹æ€§ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> raf</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.requestAnimationFrame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            window.webkitRequestAnimationFrame </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cb, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) }</span></span></code></pre></div></li></ol><h3 id="ğŸš€-è¿›é˜¶-ä½¿ç”¨-requestidlecallback-å¤„ç†éå…³é”®ä»»åŠ¡" tabindex="-1">ğŸš€ è¿›é˜¶ï¼šä½¿ç”¨ <code>requestIdleCallback</code> å¤„ç†éå…³é”®ä»»åŠ¡ <a class="header-anchor" href="#ğŸš€-è¿›é˜¶-ä½¿ç”¨-requestidlecallback-å¤„ç†éå…³é”®ä»»åŠ¡" aria-label="Permalink to &quot;ğŸš€ è¿›é˜¶ï¼šä½¿ç”¨ \`requestIdleCallback\` å¤„ç†éå…³é”®ä»»åŠ¡&quot;">â€‹</a></h3><br><p>å¯¹äºè™šæ‹Ÿæ»šåŠ¨ä¸­<strong>éå…³é”®</strong>çš„ä»»åŠ¡ï¼ˆå¦‚é¢„åŠ è½½ä¸å¯è§åŒºåŸŸçš„æ•°æ®ã€è®°å½•æ—¥å¿—ï¼‰ï¼Œå¯ä»¥æ”¾åœ¨ <code>requestIdleCallback</code> ä¸­ï¼Œåœ¨æµè§ˆå™¨ç©ºé—²æ—¶æ‰§è¡Œã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestIdleCallback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">deadline</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // å¦‚æœè¿˜æœ‰ç©ºé—²æ—¶é—´ï¼Œå°±æ‰§è¡Œä¸€äº›ä½ä¼˜å…ˆçº§ä»»åŠ¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (deadline.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">timeRemaining</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    prefetchData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p><strong>æ€»ç»“æ¥è¯´</strong>ï¼Œ<code>requestAnimationFrame</code> æ˜¯è¿æ¥æ»šåŠ¨äº‹ä»¶ä¸æµè§ˆå™¨æ¸²æŸ“ç®¡çº¿çš„â€œé»„é‡‘æ¡¥æ¢â€ã€‚å®ƒé€šè¿‡å°†<code>JS</code>æ‰§è¡Œä¸å±å¹•åˆ·æ–°ç‡åŒæ­¥ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†æ»šåŠ¨å¤„ç†ä¸­çš„æ—¶åºæ··ä¹±é—®é¢˜ã€‚ç»“åˆ <code>passive: true</code> æ¶ˆé™¤æ»šåŠ¨å»¶è¿Ÿï¼Œå†é€šè¿‡ <strong>rAF ç¡®ä¿æ¸²æŸ“æ›´æ–°åœ¨æœ€æ­£ç¡®çš„æ—¶æœºå‘ç”Ÿ</strong>ï¼Œä½ å°±èƒ½æ„å»ºå‡ºçœŸæ­£æµç•…çš„æ»šåŠ¨ä½“éªŒã€‚</p><h2 id="window-locationå¯¹è±¡" tabindex="-1">window.locationå¯¹è±¡ <a class="header-anchor" href="#window-locationå¯¹è±¡" aria-label="Permalink to &quot;window.locationå¯¹è±¡&quot;">â€‹</a></h2><p><code>Location</code> æ¥å£è¡¨ç¤ºå…¶é“¾æ¥åˆ°çš„å¯¹è±¡çš„ä½ç½®ï¼ˆ<code>URL</code>ï¼‰ã€‚æ‰€åšçš„ä¿®æ”¹åæ˜ åœ¨ä¸ä¹‹ç›¸å…³çš„å¯¹è±¡ä¸Šã€‚ <code>Document</code> å’Œ <code>Window</code> æ¥å£éƒ½æœ‰è¿™æ ·ä¸€ä¸ªé“¾æ¥çš„ <code>Location</code>ï¼Œåˆ†åˆ«é€šè¿‡ <code>Document.location</code> å’Œ <code>Window.location</code> è®¿é—®ã€‚</p>`,40)),s("table",F,[i[54]||(i[54]=s("thead",null,[s("tr",null,[s("th",null,"å±æ€§"),s("th",null,"æè¿°")])],-1)),s("tbody",null,[i[44]||(i[44]=s("tr",null,[s("td",null,[s("code",null,"location.href")]),s("td",null,[a("åŒ…å«æ•´ä¸ª "),s("code",null,"URL"),a(" çš„ä¸€ä¸ª "),s("a",{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String",target:"_blank",rel:"noreferrer"},[s("code",null,"DOMString")])])],-1)),i[45]||(i[45]=s("tr",null,[s("td",null,[s("code",null,"location.protocol")]),s("td",null,[a("åŒ…å« "),s("code",null,"URL"),a(" å¯¹åº”åè®®çš„ä¸€ä¸ª "),s("code",null,"DOMString"),a('ï¼Œæœ€åæœ‰ä¸€ä¸ª":"')])],-1)),i[46]||(i[46]=s("tr",null,[s("td",null,[s("code",null,"location.host")]),s("td",null,[a("åŒ…å«äº†åŸŸåçš„ä¸€ä¸ª "),s("code",null,"DOMString"),a('ï¼Œå¯èƒ½åœ¨è¯¥ä¸²æœ€åå¸¦æœ‰ä¸€ä¸ª":"å¹¶è·Ÿä¸Š '),s("code",null,"URL"),a(" çš„ç«¯å£å·")])],-1)),i[47]||(i[47]=s("tr",null,[s("td",null,[s("code",null,"location.hostname")]),s("td",null,[a("åŒ…å« "),s("code",null,"URL"),a(" åŸŸåçš„ä¸€ä¸ª "),s("code",null,"DOMString")])],-1)),i[48]||(i[48]=s("tr",null,[s("td",null,[s("code",null,"location.port")]),s("td",null,[a("åŒ…å«ç«¯å£å·çš„ä¸€ä¸ª "),s("code",null,"DOMString")])],-1)),i[49]||(i[49]=s("tr",null,[s("td",null,[s("code",null,"location.pathname")]),s("td",null,[a("åŒ…å« "),s("code",null,"URL"),a(" ä¸­è·¯å¾„éƒ¨åˆ†çš„ä¸€ä¸ª "),s("code",null,"DOMString"),a("ï¼Œå¼€å¤´æœ‰ä¸€ä¸ª /")])],-1)),i[50]||(i[50]=s("tr",null,[s("td",null,[s("code",null,"location.search")]),s("td",null,[a("åŒ…å« "),s("code",null,"URL"),a(" å‚æ•°çš„ä¸€ä¸ª "),s("code",null,"DOMString"),a("ï¼Œå¼€å¤´æœ‰ä¸€ä¸ªâ€œ?â€")])],-1)),i[51]||(i[51]=s("tr",null,[s("td",null,[s("code",null,"location.hash")]),s("td",null,[a("åŒ…å«å—æ ‡è¯†ç¬¦çš„ "),s("code",null,"DOMString"),a("ï¼Œå¼€å¤´æœ‰ä¸€ä¸ª #")])],-1)),i[52]||(i[52]=s("tr",null,[s("td",null,[s("code",null,"location.username")]),s("td",null,[a("åŒ…å« "),s("code",null,"URL"),a(" ä¸­åŸŸåå‰çš„ç”¨æˆ·åçš„ä¸€ä¸ª "),s("code",null,"DOMString")])],-1)),i[53]||(i[53]=s("tr",null,[s("td",null,[s("code",null,"location.password")]),s("td",null,[a("åŒ…å« "),s("code",null,"URL"),a(" åŸŸåå‰çš„å¯†ç çš„ä¸€ä¸ª "),s("code",null,"DOMString")])],-1)),s("tr",null,[s("td",null,[i[42]||(i[42]=s("code",null,"location.origin",-1)),n(t,{bordered:!1,color:"cyan"},{default:l(()=>[...i[41]||(i[41]=[a("åªè¯»",-1)])]),_:1})]),i[43]||(i[43]=s("td",null,[a("åŒ…å«é¡µé¢æ¥æºçš„åŸŸåçš„æ ‡å‡†å½¢å¼ "),s("code",null,"DOMString")],-1))])])]),i[59]||(i[59]=e('<p>å‡è®¾å½“å‰ç½‘é¡µè·¯ç”±ï¼š<code>http://172.16.200.17:8080/agent</code></p><p><img src="'+E+'" alt="Alt text"></p><h2 id="process-env" tabindex="-1"><code>process.env</code> <a class="header-anchor" href="#process-env" aria-label="Permalink to &quot;`process.env`&quot;">â€‹</a></h2><p><a href="http://nodejs.cn/api/process.html#process_process_env" target="_blank" rel="noreferrer">å‚è€ƒæ–‡æ¡£</a></p><p><strong>process.env å±æ€§è¿”å›åŒ…å«ç”¨æˆ·ç¯å¢ƒçš„å¯¹è±¡</strong></p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><code>process</code> å¯¹è±¡æ˜¯ <code>global</code> å¯¹è±¡çš„å±æ€§ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œ<code>NODE_ENV</code> ä¸æ˜¯ <code>process.env</code> å¯¹è±¡ä¸ŠåŸæœ‰çš„å±æ€§ï¼Œå®ƒæ˜¯æˆ‘ä»¬è‡ªå·±æ·»åŠ ä¸Šå»çš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œç”¨æ¥ç¡®å®šå½“å‰æ‰€å¤„çš„å¼€å‘é˜¶æ®µã€‚ä¸€èˆ¬ç”Ÿäº§é˜¶æ®µè®¾ä¸º <code>production</code>ï¼Œå¼€å‘é˜¶æ®µè®¾ä¸º<code>development</code>ï¼Œç„¶ååœ¨è„šæœ¬ä¸­è¯»å– <code>process.env.NODE_ENV</code></p></div><p><code>process.env</code> åŒ…å«ç€å…³äºç³»ç»Ÿç¯å¢ƒçš„ä¿¡æ¯ï¼Œä½†æ˜¯ <code>process.env</code> ä¸­å¹¶ä¸å­˜åœ¨ <code>NODE_ENV</code> è¿™ä¸ªä¸œè¥¿ã€‚ <code>NODE_ENV</code> æ˜¯ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰çš„å˜é‡ï¼Œåœ¨ <code>webpack</code> ä¸­å®ƒçš„ç”¨é€”æ˜¯åˆ¤æ–­ç”Ÿäº§ç¯å¢ƒæˆ–å¼€å‘ç¯å¢ƒã€‚ <code>node</code> ä¸­çš„ <code>process</code> å¯¹è±¡æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œ<strong>è¡¨ç¤ºå½“å‰çš„nodeè¿›ç¨‹ï¼Œä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®åˆ°å®ƒï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡æä¾›çš„å±æ€§å’Œæ–¹æ³•ï¼Œä½¿æˆ‘ä»¬å¯ä»¥å¯¹å½“å‰è¿è¡Œçš„ç¨‹åºçš„è¿›ç¨‹è¿›è¡Œè®¿é—®å’Œæ§åˆ¶ã€‚</strong></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(process </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> global.process) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span></code></pre></div><p>å¸¸ç”¨çš„ä¸€äº›å±æ€§ï¼š</p><ul><li><code>process.env</code> <code>&lt;Object&gt;</code>ï¼šè¿”å›åŒ…å«ç”¨æˆ·ç¯å¢ƒçš„å¯¹è±¡ã€‚</li><li><code>process.platform</code> <code>&lt;string&gt;</code>ï¼šè¿”å›ç”¨äºæ ‡è¯†ç¼–è¯‘ Node.js äºŒè¿›åˆ¶æ–‡ä»¶çš„æ“ä½œç³»ç»Ÿå¹³å°çš„å­—ç¬¦ä¸²ã€‚ ç›®å‰å¯èƒ½çš„å€¼æ˜¯ï¼š&#39;aix&#39;ï¼Œ&#39;darwin&#39;ï¼Œ&#39;freebsd&#39;ï¼Œ&#39;linux&#39;ï¼Œ&#39;openbsd&#39;ï¼Œ&#39;sunos&#39;ï¼Œ&#39;win32&#39;</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { platform } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;process&#39;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`This platform is ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">platform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>å¦‚æœ <code>Node.js</code> æ˜¯åœ¨å®‰å“æ“ä½œç³»ç»Ÿä¸Šæ„å»ºçš„ï¼Œåˆ™ä¹Ÿå¯èƒ½è¿”å›å€¼ &#39;android&#39;ã€‚ ä½†æ˜¯ï¼ŒNode.js ä¸­çš„å®‰å“æ”¯æŒæ˜¯å®éªŒçš„ã€‚</p><ul><li><code>process.uptime()</code> <code>&lt;number&gt;</code>ï¼šè¿”å›å½“å‰ Node.js è¿›ç¨‹å·²ç»è¿è¡Œçš„ç§’æ•°ã€‚ è¿”å›å€¼åŒ…æ‹¬å‡ åˆ†ä¹‹ä¸€ç§’ã€‚ ä½¿ç”¨ Math.floor() è·å¾—æ•´ç§’ã€‚</li><li><code>process.version</code> <code>&lt;string&gt;</code>ï¼šè¿”å›åŒ…å«Node.jsç‰ˆæœ¬å­—ç¬¦ä¸²ã€‚</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { version } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;process&#39;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Version: ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>// Version: v14.8.0 è¦è·å–ä¸å¸¦ v çš„ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œåˆ™ä½¿ç”¨ <code>process.versions.node</code>ã€‚</p><ul><li><code>process.versions</code> <code>&lt;Object&gt;</code>ï¼šè¿”å›å¯¹è±¡ï¼Œå…¶ä¸­åˆ—å‡ºNode.jsçš„ç‰ˆæœ¬å­—ç¬¦ä¸²åŠå…¶ä¾èµ–é¡¹ã€‚</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { versions } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;process&#39;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(versions)</span></span></code></pre></div><ul><li>å¼€å‘ç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶ <code>.env.development</code>ï¼š</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">development</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VUE_APP_API_BASE_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/api</span></span></code></pre></div><ul><li>ç”Ÿäº§ç¯å¢ƒä¸‹çš„é…ç½®æ–‡ä»¶ <code>.env.production</code>ï¼š</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VUE_APP_API_BASE_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span></span></code></pre></div><ul><li>æœ¬åœ°å¼€å‘é…ç½®æ–‡ä»¶ <code>.env.local</code>ï¼š</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VUE_APP_PROXY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://10.0.0.42:5507</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VUE_APP_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8050</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">VUE_APP_CHANNEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  //</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> è‡ªå®šä¹‰å…¨å±€å˜é‡ï¼Œå¿…é¡»ä»¥VUE_APPå¼€å¤´</span></span></code></pre></div><p><img src="'+o+`" alt="Alt text"></p><h2 id="domäº‹ä»¶å¯¹è±¡" tabindex="-1">DOMäº‹ä»¶å¯¹è±¡ <a class="header-anchor" href="#domäº‹ä»¶å¯¹è±¡" aria-label="Permalink to &quot;DOMäº‹ä»¶å¯¹è±¡&quot;">â€‹</a></h2><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">span</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><table tabindex="0"><thead><tr><th>äº‹ä»¶å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>onmouseenter</code></td><td><code>onmouseenter</code> äº‹ä»¶åœ¨é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ—¶è§¦å‘ã€‚<br>åªæœ‰å½“é¼ æ ‡æŒ‡é’ˆè¿›å…¥ div å…ƒç´ æ—¶è§¦å‘ï¼Œå†…éƒ¨ç§»åŠ¨ä¸ä¼šå†æ¬¡è§¦å‘ã€‚<br><strong>æç¤ºï¼šè¯¥äº‹ä»¶é€šå¸¸ä¸ <code>onmouseleave</code> äº‹ä»¶ä¸€åŒä½¿ç”¨, åœ¨é¼ æ ‡æŒ‡é’ˆç§»å‡ºå…ƒç´ ä¸Šæ—¶è§¦å‘ã€‚</strong></td></tr><tr><td><code>onmouseleave</code></td><td><code>onmouseleave</code> äº‹ä»¶åœ¨é¼ æ ‡ç§»å‡ºå…ƒç´ æ—¶è§¦å‘ã€‚<br><strong>æç¤ºï¼šè¯¥äº‹ä»¶é€šå¸¸ä¸ <code>onmouseenter</code> äº‹ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œ è¯¥äº‹ä»¶åœ¨é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ—¶è§¦å‘ã€‚</strong></td></tr><tr><td><code>onmouseover</code></td><td><code>onmouseover</code> äº‹ä»¶ä¼šåœ¨é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°æŒ‡å®šçš„å…ƒç´ ä¸Šæ—¶å‘ç”Ÿã€‚<br>å½“é¼ æ ‡æŒ‡é’ˆè¿›å…¥ div å…ƒç´ æ—¶ä¼šè§¦å‘ï¼Œå½“æŒ‡é’ˆè¿›å…¥å­å…ƒç´ ä¸Šæ—¶ä¹Ÿä¼šè§¦å‘(p å’Œ span)ã€‚</td></tr><tr><td><code>onmouseout</code></td><td><code>onmouseout</code> äº‹ä»¶ä¼šåœ¨é¼ æ ‡æŒ‡é’ˆç§»å‡ºæŒ‡å®šçš„å¯¹è±¡æ—¶å‘ç”Ÿã€‚çˆ¶å…ƒç´ è¿›å…¥å­å…ƒç´ ï¼Œæˆ–è€…å­å…ƒç´ è¿›å…¥çˆ¶å…ƒç´ éƒ½ä¼šè§¦å‘ã€‚</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">æç¤º</p><p><code>onmouseenter</code> äº‹ä»¶ç±»ä¼¼äº <code>onmouseover</code> äº‹ä»¶ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯ <code>onmouseenter</code> äº‹ä»¶ä¸æ”¯æŒå†’æ³¡ ã€‚ æç¤º: <code>onmouseleave</code> äº‹ä»¶ç±»ä¼¼äº <code>onmouseout</code> äº‹ä»¶ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯ <code>onmouseleave</code> äº‹ä»¶ä¸æ”¯æŒå†’æ³¡ ã€‚</p></div><table tabindex="0"><thead><tr><th>é¼ æ ‡äº‹ä»¶</th><th>æè¿°</th></tr></thead><tbody><tr><td>onclick</td><td>å½“ç”¨æˆ·ç‚¹å‡»æŸä¸ªå¯¹è±¡æ—¶è°ƒç”¨çš„äº‹ä»¶å¥æŸ„</td></tr><tr><td>oncontextmenu</td><td>åœ¨ç”¨æˆ·ç‚¹å‡»é¼ æ ‡å³é”®æ‰“å¼€ä¸Šä¸‹æ–‡èœå•æ—¶è§¦å‘</td></tr><tr><td>ondblclick</td><td>å½“ç”¨æˆ·åŒå‡»æŸä¸ªå¯¹è±¡æ—¶è°ƒç”¨çš„äº‹ä»¶å¥æŸ„</td></tr><tr><td>onmousedown</td><td>é¼ æ ‡æŒ‰é’®è¢«æŒ‰ä¸‹</td></tr><tr><td>onmouseenter</td><td>å½“é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ—¶è§¦å‘</td></tr><tr><td>onmouseleave</td><td>å½“é¼ æ ‡æŒ‡é’ˆç§»å‡ºå…ƒç´ æ—¶è§¦å‘</td></tr><tr><td>onmousemove</td><td>é¼ æ ‡è¢«ç§»åŠ¨</td></tr><tr><td>onmouseover</td><td>é¼ æ ‡ç§»åˆ°æŸå…ƒç´ ä¹‹ä¸Š</td></tr><tr><td>onmouseout</td><td>é¼ æ ‡ä»æŸå…ƒç´ ç§»å¼€</td></tr><tr><td>onmouseup</td><td>é¼ æ ‡æŒ‰é”®è¢«æ¾å¼€</td></tr></tbody></table><h2 id="ç®€å•å€’è®¡æ—¶-countdown" tabindex="-1">ç®€å•å€’è®¡æ—¶ countDown <a class="header-anchor" href="#ç®€å•å€’è®¡æ—¶-countdown" aria-label="Permalink to &quot;ç®€å•å€’è®¡æ—¶ countDown&quot;">â€‹</a></h2><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;countdown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;{{ countDown(&#39;2023-10-01 18:25:00&#39;) }}&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">h1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">countDown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (target) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> elapseTime</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">timestamp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> h </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`è¿˜å‰©ä½™\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}å°æ—¶\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}åˆ†é’Ÿ\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}ç§’\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$refs.countdown.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ä¸‹ç­äº†&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$refs.countdown.innerHTML </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> elapseTime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(timestamp)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="console-å¯¹è±¡" tabindex="-1"><code>console</code> å¯¹è±¡ <a class="header-anchor" href="#console-å¯¹è±¡" aria-label="Permalink to &quot;\`console\` å¯¹è±¡&quot;">â€‹</a></h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/console" target="_blank" rel="noreferrer">console MDN</a></p><ul><li><code>console.log()</code> å¯¹è±¡å ä½ç¬¦ï¼š<code>%o</code> æˆ– <code>%O</code><ul><li><p>å½“æ‰“å°æ™®é€šçš„ <code>object</code> å¯¹è±¡æ—¶æ²¡æœ‰åŒºåˆ«</p></li><li><p>å½“æ‰“å° <code>DOM</code> å¯¹è±¡æ—¶</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;slider&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ul><li><code>%o</code></li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;%o&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$refs.slider) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// slider:%o</span></span></code></pre></div><p><img src="`+g+'" alt="Alt text"></p><ul><li><code>%O</code></li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;%O&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$refs.slider) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// slider:%O</span></span></code></pre></div><p><img src="'+c+'" alt="Alt text"></p></li></ul></li></ul><h2 id="jsä¸­-href-å±æ€§ä¸­å˜é‡è¿æ¥ç¬¦éœ€è¦ä½¿ç”¨-amp" tabindex="-1">jsä¸­ <code>href</code> å±æ€§ä¸­å˜é‡è¿æ¥ç¬¦éœ€è¦ä½¿ç”¨ <code>&amp;amp;</code> <a class="header-anchor" href="#jsä¸­-href-å±æ€§ä¸­å˜é‡è¿æ¥ç¬¦éœ€è¦ä½¿ç”¨-amp" aria-label="Permalink to &quot;jsä¸­ `href` å±æ€§ä¸­å˜é‡è¿æ¥ç¬¦éœ€è¦ä½¿ç”¨ `&amp;amp;`&quot;">â€‹</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">href </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/user/login?type=0&amp;amp;tab=-1&#39;</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.$router.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/register?type=0&amp;tab=-1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div>',37))])}const f=k(y,[["render",u]]);export{B as __pageData,f as default};
