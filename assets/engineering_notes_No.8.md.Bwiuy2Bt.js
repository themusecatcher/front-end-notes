import{_ as i,c as a,o as n,ac as t}from"./chunks/framework.CtEZafqV.js";const E=JSON.parse('{"title":"Note 8","description":"","frontmatter":{},"headers":[],"relativePath":"engineering/notes/No.8.md","filePath":"engineering/notes/No.8.md","lastUpdated":1764661225000}'),l={name:"engineering/notes/No.8.md"};function e(p,s,h,k,d,o){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="note-8" tabindex="-1">Note 8 <a class="header-anchor" href="#note-8" aria-label="Permalink to &quot;Note 8&quot;">â€‹</a></h1><h2 id="import-åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰²" tabindex="-1"><code>import()</code> åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰² <a class="header-anchor" href="#import-åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰²" aria-label="Permalink to &quot;\`import()\` åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰²&quot;">â€‹</a></h2><p>åœ¨ <code>Webpack</code> å’Œ <code>Vite</code> ä¸­ï¼Œ<code>import()</code> åŠ¨æ€å¯¼å…¥æ˜¯å®ç°ä»£ç åˆ†å‰²çš„å…³é”®ã€‚ä¸ºäº†è®©ä½ å¿«é€Ÿäº†è§£å®ƒä»¬çš„å¼‚åŒï¼Œä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æ ¸å¿ƒä¿¡æ¯ï¼š</p><table tabindex="0"><thead><tr><th style="text-align:left;">ç‰¹æ€§</th><th style="text-align:left;"><code>Webpack</code></th><th style="text-align:left;"><code>Vite</code></th></tr></thead><tbody><tr><td style="text-align:left;"><strong>å®ç°åŸç†</strong></td><td style="text-align:left;">é€šè¿‡æ‰“åŒ…å·¥å…·åœ¨æ„å»ºæ—¶åˆ†æå¹¶æ‹†åˆ†</td><td style="text-align:left;">å¼€å‘é˜¶æ®µä¾èµ–<strong>æµè§ˆå™¨åŸç”ŸESæ¨¡å—</strong>ï¼Œç”Ÿäº§é˜¶æ®µä½¿ç”¨ <strong>Rollup</strong> æ‰“åŒ…</td></tr><tr><td style="text-align:left;"><strong>åˆ†å‰²æ–¹å¼</strong></td><td style="text-align:left;">1. åŠ¨æ€ <code>import()</code> è¯­æ³•<br>2. é…ç½® <code>optimization.splitChunks</code><br>3. å¤šå…¥å£ç‚¹</td><td style="text-align:left;">1. åŠ¨æ€ <code>import()</code> è¯­æ³•<br>2. <strong>è‡ªå®šä¹‰ä¾èµ–æ‹†åˆ†</strong> (<code>vendor chunk</code>)<br>3. å¤šå…¥å£ç‚¹ (<code>MPA</code>)</td></tr><tr><td style="text-align:left;"><strong>è¾“å‡ºç»“æœ</strong></td><td style="text-align:left;">ç”Ÿæˆç‹¬ç«‹çš„ <code>.js</code> <code>chunk</code> æ–‡ä»¶ï¼Œå¯é€šè¿‡é­”æ³•æ³¨é‡Š(<code>/* webpackChunkName: &quot;my-chunk&quot; */</code>)å‘½å</td><td style="text-align:left;">ç”Ÿæˆç‹¬ç«‹çš„ <code>.js</code> <code>chunk</code> æ–‡ä»¶ï¼Œéµå¾ª <code>ES</code> æ¨¡å—æ ‡å‡†</td></tr><tr><td style="text-align:left;"><strong>ä¼˜åŠ¿</strong></td><td style="text-align:left;">ç”Ÿæ€æˆç†Ÿï¼Œæ’ä»¶ä¸°å¯Œï¼Œé…ç½®çµæ´»åº¦é«˜</td><td style="text-align:left;"><strong>å¼€å‘ç¯å¢ƒæ— éœ€æ‰“åŒ…</strong>ï¼Œä¾èµ–åŸç”Ÿ<code>ESM</code>ï¼ŒåŠ è½½é€Ÿåº¦å¿«</td></tr></tbody></table><h3 id="ğŸ”§-webpack-çš„ä»£ç åˆ†å‰²æœºåˆ¶" tabindex="-1">ğŸ”§ Webpack çš„ä»£ç åˆ†å‰²æœºåˆ¶ <a class="header-anchor" href="#ğŸ”§-webpack-çš„ä»£ç åˆ†å‰²æœºåˆ¶" aria-label="Permalink to &quot;ğŸ”§ Webpack çš„ä»£ç åˆ†å‰²æœºåˆ¶&quot;">â€‹</a></h3><br><p><code>Webpack</code> ä¸»è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ä»£ç åˆ†å‰²ï¼š</p><ol><li><p><strong>åŠ¨æ€å¯¼å…¥</strong>ï¼šåœ¨ä»£ç ä¸­ä½¿ç”¨ <code>import()</code> è¯­æ³•ï¼Œ<code>Webpack</code> ä¼šè‡ªåŠ¨å°†è¢«å¯¼å…¥çš„æ¨¡å—åˆ†å‰²æˆå•ç‹¬çš„ <code>chunk</code>ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å½“éœ€è¦æ—¶å†åŠ è½½è¿™ä¸ªæ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;btn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackChunkName: &quot;my-chunk&quot; */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./module.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doSomething</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><p>å¯ä»¥ä½¿ç”¨ <code>/* webpackChunkName: &quot;name&quot; */</code> é­”æ³•æ³¨é‡Šä¸ºåˆ†å‰²åçš„ <code>chunk</code> æŒ‡å®šåç§°ã€‚</p></li><li><p><strong>é…ç½® SplitChunksPlugin</strong>ï¼šé€šè¿‡ <code>optimization.splitChunks</code> é…ç½®ï¼Œ<code>Webpack</code> å¯ä»¥è‡ªåŠ¨æå–å…¬å…±ä¾èµ–æˆ–æŒ‰ç­–ç•¥æ‹†åˆ†ä»£ç ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimization: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    splitChunks: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      chunks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><h4 id="ğŸ”§-æ ¸å¿ƒæœºåˆ¶ä¸é…ç½®" tabindex="-1">ğŸ”§ æ ¸å¿ƒæœºåˆ¶ä¸é…ç½® <a class="header-anchor" href="#ğŸ”§-æ ¸å¿ƒæœºåˆ¶ä¸é…ç½®" aria-label="Permalink to &quot;ğŸ”§ æ ¸å¿ƒæœºåˆ¶ä¸é…ç½®&quot;">â€‹</a></h4><ul><li><p>è§¦å‘åˆ†å‰²ä¸ç”Ÿæˆ <code>Chunk</code>ï¼š<code>Webpack</code> åœ¨ç¼–è¯‘é˜¶æ®µé‡åˆ° <code>import()</code> è¯­æ³•æ—¶ï¼Œä¼šå°†å…¶è¯†åˆ«ä¸ºä¸€ä¸ªä»£ç åˆ†å‰²ç‚¹ã€‚è¢« <code>import()</code> å¼•ç”¨çš„æ¨¡å—åŠå…¶ä¾èµ–ï¼ˆé™¤éå·²è¢«ä¸»å…¥å£æˆ–å…¶ä»– <code>chunk</code> å¼•ç”¨ï¼‰ä¼šè¢«æå–å‡ºæ¥ï¼Œå•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªæ–°çš„ <code>JavaScript</code> æ–‡ä»¶ï¼ˆå³ <code>chunk</code>ï¼‰ã€‚è¿™é¿å…äº†è¯¥æ¨¡å—çš„ä»£ç è¢«æ‰“åŒ…è¿›ä¸»å…¥å£æ–‡ä»¶ï¼ˆå¦‚ <code>app.js</code>ï¼‰ï¼Œä»è€Œå‡å°äº†åˆå§‹åŠ è½½ä½“ç§¯ã€‚</p></li><li><p><code>Chunk</code> å‘½åä¸é­”æ³•æ³¨é‡Šï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›åŠ¨æ€å¯¼å…¥äº§ç”Ÿçš„ <code>chunk</code> æ–‡ä»¶ä¼šæŒ‰æ•°å­—åºå·å‘½åï¼ˆä¾‹å¦‚ <code>0.js</code>, <code>1.js</code>ï¼‰ã€‚ä¸ºäº†ä¾¿äºè¯†åˆ«å’Œç®¡ç†ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>Webpack</code> ç‰¹æœ‰çš„é­”æ³•æ³¨é‡Š <code>/* webpackChunkName: &quot;your-chunk-name&quot; */</code> æ¥è‡ªå®šä¹‰ <code>chunk</code> çš„åç§°ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä½¿ç”¨ webpackChunkName æ³¨é‡Šç»™åˆ†å‰²å‡ºçš„æ–‡ä»¶å‘½å[citation:9]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackChunkName: &quot;my-special-chunk&quot; */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./modules/someSpecialModule.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ä½¿ç”¨æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span></code></pre></div><p>åœ¨ <code>Vue</code> é¡¹ç›®ä¸­ï¼Œè¿™å¸¸ç”¨äºå°†å¤šä¸ªç›¸å…³ç»„ä»¶æ‰“åŒ…åˆ°åŒä¸€ä¸ª <code>chunk</code> ä¸­</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŠŠç»„ä»¶æŒ‰ç»„åˆ†å—ï¼š&#39;group-foo&#39; chunk å°†åŒ…å« Foo, Bar, Baz ç»„ä»¶[citation:10]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Foo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackChunkName: &quot;group-foo&quot; */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./Foo.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackChunkName: &quot;group-foo&quot; */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./Bar.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Baz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* webpackChunkName: &quot;group-foo&quot; */</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./Baz.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div></li><li><p>è¿è¡Œæ—¶åŠ è½½ï¼šæ‰“åŒ…å®Œæˆåï¼Œåœ¨æµè§ˆå™¨ä¸­è¿è¡Œåº”ç”¨æ—¶ï¼Œå½“ <code>JavaScript</code> æ‰§è¡Œåˆ° <code>import()</code> è¯­å¥ï¼Œ<code>Webpack</code> çš„è¿è¡Œæ—¶ä¼šåŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ª <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œå‘æœåŠ¡å™¨è¯·æ±‚å¯¹åº”çš„ <code>chunk</code> æ–‡ä»¶ã€‚<code>import()</code> å‡½æ•°è¿”å›ä¸€ä¸ª <code>Promise</code>ï¼Œåœ¨ <code>chunk</code> æ–‡ä»¶åŠ è½½å¹¶æ‰§è¡ŒæˆåŠŸåï¼Œè¿™ä¸ª <code>Promise</code> ä¼š <code>resolve</code> å¹¶è¿”å›è¢«å¯¼å…¥æ¨¡å—çš„å¯¼å‡ºå†…å®¹ã€‚</p></li></ul><h4 id="âš™ï¸-webpack-é…ç½®ä¼˜åŒ–" tabindex="-1">âš™ï¸ Webpack é…ç½®ä¼˜åŒ– <a class="header-anchor" href="#âš™ï¸-webpack-é…ç½®ä¼˜åŒ–" aria-label="Permalink to &quot;âš™ï¸ Webpack é…ç½®ä¼˜åŒ–&quot;">â€‹</a></h4><ul><li><p>ä½¿ç”¨ <code>SplitChunksPlugin</code>ï¼šé™¤äº†åŠ¨æ€å¯¼å…¥ï¼Œ<code>Webpack</code> çš„ <code>optimization.splitChunks</code> é…ç½®ï¼ˆå†…ç½®äº† <code>SplitChunksPlugin</code>ï¼‰ç”¨äºæå–å¤šä¸ª <code>chunk</code> ä¹‹é—´çš„å…¬å…±ä¾èµ–æˆ–ç¬¬ä¸‰æ–¹åº“åˆ°ç‹¬ç«‹çš„ <code>chunk</code>ï¼Œé¿å…ä»£ç é‡å¤ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vue.config.js æˆ– webpack.config.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  configureWebpack: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    optimization: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      splitChunks: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        chunks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¯¹æ‰€æœ‰ç±»å‹çš„ chunk è¿›è¡Œä¼˜åŒ–[citation:1]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cacheGroups: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          vendors: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            test:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">node_modules</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[</span><span style="--shiki-light:#22863A;--shiki-light-font-weight:bold;--shiki-dark:#85E89D;--shiki-dark-font-weight:bold;">\\\\</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">/]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å°† node_modules ä¸­çš„ç¬¬ä¸‰æ–¹åº“æå–åˆ° vendors chunk[citation:7]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;vendors&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            chunks: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          commons: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;commons&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            minChunks: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è¢«è‡³å°‘ä¸¤ä¸ª chunk å¼•ç”¨çš„æ¨¡å—æ‰ä¼šè¢«æå–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            priority: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ul><h3 id="âš¡-vite-çš„ä»£ç åˆ†å‰²æœºåˆ¶" tabindex="-1">âš¡ Vite çš„ä»£ç åˆ†å‰²æœºåˆ¶ <a class="header-anchor" href="#âš¡-vite-çš„ä»£ç åˆ†å‰²æœºåˆ¶" aria-label="Permalink to &quot;âš¡ Vite çš„ä»£ç åˆ†å‰²æœºåˆ¶&quot;">â€‹</a></h3><br><p><code>Vite</code> åœ¨å¤„ç†ä»£ç åˆ†å‰²æ—¶ï¼Œå¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒæœ‰æ‰€ä¸åŒï¼š</p><ol><li><strong>å¼€å‘ç¯å¢ƒ</strong>ï¼š<code>Vite</code> çš„å¼€å‘æœåŠ¡å™¨ç›´æ¥åˆ©ç”¨<strong>æµè§ˆå™¨å¯¹ ES æ¨¡å—çš„åŸç”Ÿæ”¯æŒ</strong>ï¼Œä¸å¯¹ä»£ç è¿›è¡Œæ‰“åŒ…ã€‚å½“é‡åˆ° <code>import()</code> è¯­å¥æ—¶ï¼Œæµè§ˆå™¨ä¼šç›´æ¥æŒ‰éœ€è¯·æ±‚å¯¹åº”çš„æ¨¡å—æ–‡ä»¶ï¼Œ<code>Vite</code> æœåŠ¡å™¨åˆ™ä¼šæŒ‰éœ€ç¼–è¯‘ï¼Œå®ç°äº†çœŸæ­£çš„æŒ‰éœ€åŠ è½½ã€‚</li><li><strong>ç”Ÿäº§ç¯å¢ƒ</strong>ï¼š<code>Vite</code> ä½¿ç”¨ <strong>Rollup</strong> è¿›è¡Œæ„å»ºæ‰“åŒ…ã€‚<code>Rollup</code> åŒæ ·æ”¯æŒåŠ¨æ€å¯¼å…¥è¯­æ³•ï¼Œä¼šè‡ªåŠ¨å°†åŠ¨æ€ <code>import()</code> è¯­å¥è¯†åˆ«ä¸ºä»£ç åˆ†å‰²ç‚¹ï¼Œå¹¶å°†è¿™äº›å¼‚æ­¥æ¨¡å—åŠå…¶ä¾èµ–æ‰“åŒ…æˆç‹¬ç«‹çš„ <code>chunk</code> æ–‡ä»¶ï¼ˆå¦‚ <code>About.[hash].js</code>ï¼‰ã€‚<br><code>Vite</code> é»˜è®¤è¿˜æä¾›äº†å¼€ç®±å³ç”¨çš„ä¼˜åŒ–ï¼š <ul><li><strong>è‡ªå®šä¹‰æ‹†åŒ…ç­–ç•¥</strong>ï¼šä½ å¯ä»¥åœ¨ <code>vite.config.ts</code> ä¸­é€šè¿‡ <code>build.rollupOptions.output.manualChunks</code> é…ç½®æ›´ç²¾ç»†çš„æ‹†åŒ…ç­–ç•¥ã€‚ä¾‹å¦‚ï¼šå°†ç¬¬ä¸‰æ–¹åº“ï¼ˆæ¥è‡ª <code>node_modules</code>ï¼‰æ‰“åŒ…åˆ°ä¸€ä¸ªå•ç‹¬çš„ <code>vendor</code> <code>chunk</code> ä¸­ï¼Œä»¥æé«˜æµè§ˆå™¨ç¼“å­˜åˆ©ç”¨ç‡ã€‚</li></ul></li></ol><h4 id="âš™ï¸-æ‰‹åŠ¨é…ç½®ä¸ä¼˜åŒ–ä»£ç åˆ†å‰²" tabindex="-1">âš™ï¸ æ‰‹åŠ¨é…ç½®ä¸ä¼˜åŒ–ä»£ç åˆ†å‰² <a class="header-anchor" href="#âš™ï¸-æ‰‹åŠ¨é…ç½®ä¸ä¼˜åŒ–ä»£ç åˆ†å‰²" aria-label="Permalink to &quot;âš™ï¸ æ‰‹åŠ¨é…ç½®ä¸ä¼˜åŒ–ä»£ç åˆ†å‰²&quot;">â€‹</a></h4><br><p>è™½ç„¶ <code>Vite</code> æä¾›äº†å¼€ç®±å³ç”¨çš„ä»£ç åˆ†å‰²ï¼Œä½†ä½ ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®å®ç°æ›´ç²¾ç»†åŒ–çš„æ§åˆ¶ã€‚</p><ol><li>è‡ªå®šä¹‰ç¬¬ä¸‰æ–¹åº“çš„æ‹†åˆ†ç­–ç•¥<br> é€šè¿‡ <code>build.rollupOptions.output.manualChunks</code>ï¼Œä½ å¯ä»¥æ‰‹åŠ¨å°†ç‰¹å®šçš„ç¬¬ä¸‰æ–¹åº“æ‹†åˆ†åˆ°ç‹¬ç«‹çš„<code>chunk</code>ä¸­ã€‚è¿™æœ‰åŠ©äºæ›´å¥½åœ°åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      output: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä½¿ç”¨å‡½æ•°å½¢å¼è¿›è¡Œæ‰‹åŠ¨åˆ†å—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        manualChunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å°†å¤§ä½“ç§¯çš„ä¾èµ–æ‹†åˆ†æˆç‹¬ç«‹çš„ chunk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lodash&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;lodash&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;element-plus&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å…¶ä»–ä¾èµ–å½’åˆ° vendor å—</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vendor&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><ol start="2"><li>ä½¿ç”¨å¯¹è±¡å½¢å¼ç®€åŒ–é…ç½®<br> å¯¹äºæ˜ç¡®çš„åº“ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡å½¢å¼é…ç½® <code>manualChunks</code>ï¼Œæ›´ä¸ºç›´è§‚ã€‚</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      output: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        manualChunks: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // å°† React ç›¸å…³åº“æ‰“åŒ…åˆ°å•ç‹¬çš„ chunk ä¸­</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &#39;react-vendor&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;react&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;react-dom&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // å°† Lodash åº“çš„ä»£ç å•ç‹¬æ‰“åŒ…</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &#39;lodash&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lodash-es&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          // å°†ç»„ä»¶åº“çš„ä»£ç æ‰“åŒ…</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &#39;library&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;antd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h4 id="ğŸš€-vite-é…ç½®ä¼˜åŒ–å»ºè®®" tabindex="-1">ğŸš€ Vite é…ç½®ä¼˜åŒ–å»ºè®® <a class="header-anchor" href="#ğŸš€-vite-é…ç½®ä¼˜åŒ–å»ºè®®" aria-label="Permalink to &quot;ğŸš€ Vite é…ç½®ä¼˜åŒ–å»ºè®®&quot;">â€‹</a></h4><ol><li><strong>ä¼˜åŒ–ä¾èµ–é¢„æ„å»º</strong>ï¼šå¯¹äºæŸäº›æœªèƒ½è¢« <code>Vite</code> è‡ªåŠ¨è¯†åˆ«çš„ä¾èµ–ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>optimizeDeps.include</code> å¼ºåˆ¶å…¶é¢„æ„å»ºã€‚</li></ol><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  optimizeDeps: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    include: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lodash-es&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;your-library&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ˜¾å¼åŒ…å«éœ€è¦é¢„æ„å»ºçš„ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    exclude: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;old-library&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ’é™¤ä¸éœ€è¦é¢„æ„å»ºçš„åº“[citation:2]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><ol start="2"><li><p><strong>æ„å»ºè¿‡ç¨‹ä¸è¾“å‡ºä¼˜åŒ–</strong></p><ul><li><p><strong>ä»£ç åˆ†å‰²ä¸æ‰‹åŠ¨åˆ†å—</strong>ï¼šåˆ©ç”¨ <code>Rollup</code> çš„ <code>manualChunks</code> é¿å… <code>vendor</code> å—è¿‡å¤§ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rollupOptions: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      output: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        manualChunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // å°†å¤§ä½“ç§¯çš„ä¾èµ–æ‹†åˆ†æˆç‹¬ç«‹çš„ chunk</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;lodash&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;lodash&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;element-plus&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;element-plus&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vendor&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // å…¶ä»–ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li><li><p><strong>ä½¿ç”¨ <code>esbuild</code> å‹ç¼©</strong>ï¼š<code>Vite</code> é»˜è®¤ä½¿ç”¨ <code>esbuild</code> è¿›è¡Œå‹ç¼©ï¼Œè¿™æ¯” <code>terser</code> å¿«å¾ˆå¤šã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minify: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;esbuild&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // é»˜è®¤å€¼ï¼Œé€šå¸¸æ— éœ€è®¾ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li><li><p><strong>ç§»é™¤è°ƒè¯•ä»£ç </strong>ï¼šç”Ÿäº§æ„å»ºæ—¶ç§»é™¤ <code>console</code>ã€<code>debugger</code> å’Œæ³¨é‡Š è¯­å¥ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  build: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minify: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;terser&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    terserOptions: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // åœ¨æ‰“åŒ…ä»£ç æ—¶ç§»é™¤ consoleã€debugger å’Œ æ³¨é‡Š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      compress: {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        /* (default: false) -- Pass true to discard calls to console.* functions.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          If you wish to drop a specific function call such as console.info and/or</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          retain side effects from function arguments after dropping the function</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          call then use pure_funcs instead</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        */</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * å¦‚æœåœ¨è°ƒè¯•æ§åˆ¶å°ä¸­æ‰“å°äº†æŸä¸ªå¯¹è±¡ï¼Œåˆ™è°ƒè¯•æ§åˆ¶å°å°±æŒæœ‰äº†å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œè¯¥å¯¹è±¡å°±æ— æ³•è¢«å›æ”¶äº†ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„éœ²</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        * ç»è¿‡éªŒè¯ï¼Œåªæœ‰ devtools æ‰“å¼€æ—¶ï¼Œconsole æ‰“å°æ‰ä¼šå¼•èµ·å†…å­˜æ³„æ¼çš„ï¼Œå¦‚æœä¸æ‰“å¼€æ§åˆ¶å°ï¼Œconsole æ˜¯ä¸ä¼šå¼•èµ·å†…å­˜å˜åŒ–çš„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        drop_console: isBuild, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”Ÿäº§ç¯å¢ƒæ—¶ç§»é™¤ console</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        drop_debugger: isBuild</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      format: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        comments: isBuild </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”Ÿäº§ç¯å¢ƒæ—¶åˆ é™¤æ³¨é‡Š comments</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li><li><p><strong>èµ„æºå†…è”ä¸å‹ç¼©</strong>ï¼šå°èµ„æºè‡ªåŠ¨è½¬ <code>Base64</code> å‡å°‘è¯·æ±‚ï¼›ä½¿ç”¨ <code>vite-plugin-compression</code> ç”Ÿæˆ <code>Gzip</code> æˆ– <code>Brotli</code> å‹ç¼©æ–‡ä»¶ã€‚</p></li></ul></li><li><p><strong>å¼€å‘é˜¶æ®µä¼˜åŒ–</strong></p><ul><li><strong>ç²¾ç®€æ’ä»¶</strong>ï¼šä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨æ’ä»¶ï¼Œå¹¶ç¡®ä¿æ’ä»¶æ˜¯é«˜æ•ˆçš„ã€‚é¿å…å¤šä¸ªæ’ä»¶åšåŒä¸€ä»¶äº‹ã€‚</li><li><strong>é¿å…æ¡¶æ–‡ä»¶ (Barrel Files)</strong>ï¼šç›´æ¥å¯¼å…¥æ¨¡å—çš„å…·ä½“è·¯å¾„ï¼ˆå¦‚ <code>import { slash } from &#39;./utils/slash.js&#39;</code>ï¼‰ï¼Œè€Œéé€šè¿‡ç´¢å¼•æ–‡ä»¶ï¼ˆå¦‚ <code>import { slash } from &#39;./utils&#39;</code>ï¼‰ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶åŠ è½½å’Œç¼–è¯‘ï¼Œæå‡é¡µé¢åŠ è½½é€Ÿåº¦ã€‚</li><li><strong>é¢„çƒ­å¸¸ç”¨æ–‡ä»¶</strong>ï¼šå¯¹äºè½¬æ¢æ—¶é—´è¾ƒé•¿çš„æ–‡ä»¶æˆ–è€…é¢„è®¡æŸäº›æ–‡ä»¶å°†è¢«çŸ­æ—¶é—´å†…è¯·æ±‚ï¼Œä½¿ç”¨ <code>server.warmup</code> é€‰é¡¹æå‰è½¬æ¢å’Œç¼“å­˜å®ƒä»¬ï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶æé«˜åˆå§‹é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œå¹¶é˜²æ­¢è½¬æ¢ç€‘å¸ƒã€‚</li></ul><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// vite.config.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  server: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     warmup: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      clientFiles: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/components/*.vue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/utils/big-utils.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä»…åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ssrFiles: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./src/server/modules/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä»…åœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸­ä½¿ç”¨çš„æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li><li><p><strong>ä½¿ç”¨æ„å»ºåˆ†æå·¥å…·</strong>ï¼šä½¿ç”¨ <code>rollup-plugin-visualizer</code> åˆ†ææ„å»ºäº§ç‰©ï¼Œè¯†åˆ«ä½“ç§¯è¿‡å¤§çš„æ¨¡å—å¹¶é’ˆå¯¹æ€§ä¼˜åŒ–ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { defineConfig } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vite&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> visualizer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;rollup-plugin-visualizer&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  plugins: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ... å…¶ä»–æ’ä»¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    visualizer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;stats.html&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç±»å‹ string é»˜è®¤ stats.html</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      open: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è‡ªåŠ¨æ‰“å¼€åˆ†æé¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;treemap&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç±»å‹ string é»˜è®¤ treemapï¼Œå¯é€‰ï¼š&#39;sunburst&#39;, &#39;treemap&#39;, &#39;network&#39;, &#39;raw-data&#39;, &#39;list&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      gzipSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      brotliSize: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div></li></ol><h3 id="ğŸ’¡-å®è·µå»ºè®®" tabindex="-1">ğŸ’¡ å®è·µå»ºè®® <a class="header-anchor" href="#ğŸ’¡-å®è·µå»ºè®®" aria-label="Permalink to &quot;ğŸ’¡ å®è·µå»ºè®®&quot;">â€‹</a></h3><ul><li><strong>è·¯ç”±çº§åˆ†å‰²</strong>ï¼šå¯¹äºå•é¡µé¢åº”ç”¨ï¼ˆ<code>SPA</code>ï¼‰ï¼Œç»“åˆ <code>import()</code> å’Œè·¯ç”±é…ç½®ï¼ˆå¦‚ <code>Vue Router</code> çš„ <code>() =&gt; import(&#39;./MyComponent.vue&#39;)</code> æˆ– <code>React.lazy</code>ï¼‰å®ç°è·¯ç”±çº§åˆ«çš„åˆ†å‰²ï¼Œèƒ½æ˜¾è‘—æå‡é¦–å±åŠ è½½é€Ÿåº¦ã€‚</li><li><strong>é¿å…è¿‡åº¦åˆ†å‰²</strong>ï¼šè™½ç„¶ä»£ç åˆ†å‰²èƒ½ä¼˜åŒ–åŠ è½½æ€§èƒ½ï¼Œä½†ä¹Ÿè¦é¿å…äº§ç”Ÿè¿‡å¤šçš„å°æ–‡ä»¶ï¼Œå› ä¸ºå¤§é‡çš„ <code>HTTP</code> è¯·æ±‚ä¹Ÿå¯èƒ½å¸¦æ¥æ€§èƒ½å¼€é”€ã€‚</li></ul><h3 id="ğŸ”-vite-ä¸-webpack-çš„ä¸»è¦åŒºåˆ«" tabindex="-1">ğŸ” Vite ä¸ Webpack çš„ä¸»è¦åŒºåˆ« <a class="header-anchor" href="#ğŸ”-vite-ä¸-webpack-çš„ä¸»è¦åŒºåˆ«" aria-label="Permalink to &quot;ğŸ” Vite ä¸ Webpack çš„ä¸»è¦åŒºåˆ«&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th style="text-align:left;">ç‰¹æ€§å¯¹æ¯”</th><th style="text-align:left;">Vite</th><th style="text-align:left;">Webpack (å¼€å‘æ¨¡å¼)</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>å¼€å‘æœåŠ¡å™¨å¯åŠ¨</strong></td><td style="text-align:left;"><strong>æ— éœ€æ‰“åŒ…</strong>ï¼Œåˆ©ç”¨æµè§ˆå™¨åŸç”Ÿ <code>ESM</code>ï¼ŒæŒ‰éœ€ç¼–è¯‘</td><td style="text-align:left;">éœ€é¢„å…ˆæ‰“åŒ…æ‰€æœ‰æ¨¡å—ï¼Œé¡¹ç›®å¤§æ—¶æ…¢</td></tr><tr><td style="text-align:left;"><strong>çƒ­æ›´æ–° (HMR)</strong></td><td style="text-align:left;"><strong>æ›´è¿…é€Ÿ</strong>ï¼Œä»…ç¼–è¯‘ä¿®æ”¹æ–‡ä»¶</td><td style="text-align:left;">éœ€é‡æ–°æ„å»ºç›¸å…³ä¾èµ–é“¾ï¼Œååº”é€Ÿåº¦æ…¢</td></tr><tr><td style="text-align:left;"><strong>ç”Ÿäº§æ„å»º</strong></td><td style="text-align:left;">ä½¿ç”¨ <strong>Rollup</strong>ï¼Œè¾“å‡ºé«˜åº¦ä¼˜åŒ–ä»£ç </td><td style="text-align:left;">ä½¿ç”¨è‡ªèº«æ‰“åŒ…æœºåˆ¶</td></tr><tr><td style="text-align:left;"><strong>å¤„ç† Vue å•æ–‡ä»¶</strong></td><td style="text-align:left;">æ·±åº¦é›†æˆï¼Œé€šè¿‡ <code>@vitejs/plugin-vue</code> æŒ‰éœ€ç¼–è¯‘</td><td style="text-align:left;">ä¾èµ– <code>vue-loader</code></td></tr><tr><td style="text-align:left;"><strong>TypeScript</strong></td><td style="text-align:left;">é»˜è®¤æ”¯æŒ <strong><code>.ts</code> æ–‡ä»¶è½¬è¯‘</strong> (ä»…è½¬è¯‘ï¼Œä¸æ ¡éªŒ)</td><td style="text-align:left;">éœ€é¢å¤–é…ç½® <code>ts-loader</code> ç­‰</td></tr></tbody></table><h3 id="ğŸ’-æ€»ç»“" tabindex="-1">ğŸ’ æ€»ç»“ <a class="header-anchor" href="#ğŸ’-æ€»ç»“" aria-label="Permalink to &quot;ğŸ’ æ€»ç»“&quot;">â€‹</a></h3><br><p><code>Webpack</code> å’Œ <code>Vite</code> éƒ½é€šè¿‡ <code>import()</code> å®ç°äº†å¼ºå¤§çš„ä»£ç åˆ†å‰²èƒ½åŠ›ï¼Œä½†å®ƒä»¬çš„åº•å±‚å“²å­¦ä¸åŒã€‚<code>Webpack</code> åŠŸèƒ½å…¨é¢ä¸”é«˜åº¦å¯é…ç½®ï¼Œ<code>Vite</code> åˆ™åˆ©ç”¨åŸç”Ÿ <code>ESM</code> åœ¨å¼€å‘é˜¶æ®µæä¾›äº†æ›´å¿«çš„é€Ÿåº¦å’Œæ›´ç®€æ´çš„ä½“éªŒã€‚ä½ å¯ä»¥æ ¹æ®é¡¹ç›®çš„å…·ä½“éœ€æ±‚å’Œå›¢é˜Ÿçš„æŠ€æœ¯æ ˆæ¥é€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚</p><h2 id="vite-é»˜è®¤å°†å°èµ„æºè‡ªåŠ¨è½¬-base64-å‡å°‘è¯·æ±‚" tabindex="-1"><a href="https://cn.vitejs.dev/config/build-options#build-assetsinlinelimit" target="_blank" rel="noreferrer">Vite é»˜è®¤å°†å°èµ„æºè‡ªåŠ¨è½¬ Base64 å‡å°‘è¯·æ±‚</a> <a class="header-anchor" href="#vite-é»˜è®¤å°†å°èµ„æºè‡ªåŠ¨è½¬-base64-å‡å°‘è¯·æ±‚" aria-label="Permalink to &quot;[Vite é»˜è®¤å°†å°èµ„æºè‡ªåŠ¨è½¬ Base64 å‡å°‘è¯·æ±‚](https://cn.vitejs.dev/config/build-options#build-assetsinlinelimit)&quot;">â€‹</a></h2><p><code>Vite</code> é»˜è®¤ä¼šå°†é¡¹ç›®ä¸­è¾ƒå°çš„é™æ€èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰è‡ªåŠ¨è½¬æ¢ä¸º <code>Base64</code> æ ¼å¼å†…è”åˆ°ä»£ç ä¸­ï¼Œç›®çš„æ˜¯å‡å°‘ä¸å¿…è¦çš„ <code>HTTP</code> è¯·æ±‚ï¼Œä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚è¿™ä¸ªè¡Œä¸ºåœ¨å¼€å‘å’Œç”Ÿäº§æ„å»ºç¯å¢ƒä¸­éƒ½å¯èƒ½å‘ç”Ÿã€‚</p><h3 id="âš™ï¸-æ ¸å¿ƒæœºåˆ¶ä¸é…ç½®" tabindex="-1">âš™ï¸ æ ¸å¿ƒæœºåˆ¶ä¸é…ç½® <a class="header-anchor" href="#âš™ï¸-æ ¸å¿ƒæœºåˆ¶ä¸é…ç½®" aria-label="Permalink to &quot;âš™ï¸ æ ¸å¿ƒæœºåˆ¶ä¸é…ç½®&quot;">â€‹</a></h3><br><p><code>Vite</code> å®ç°æ­¤åŠŸèƒ½çš„æ ¸å¿ƒæ˜¯ <code>assetsInlineLimit</code> é€‰é¡¹ã€‚</p><table tabindex="0"><thead><tr><th style="text-align:left;">é…ç½®åœºæ™¯</th><th style="text-align:left;">å¤„ç†æ–¹å¼</th><th style="text-align:left;">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>ä½¿ç”¨é»˜è®¤å€¼</strong></td><td style="text-align:left;">å°äº <strong>4KB</strong> çš„èµ„æºè‡ªåŠ¨å†…è”ä¸º <code>Base64</code>ã€‚</td><td style="text-align:left;">è¿™æ˜¯ <code>Vite</code> çš„åˆå§‹é…ç½®ï¼Œæ— éœ€é¢å¤–è®¾ç½®ã€‚</td></tr><tr><td style="text-align:left;"><strong>è‡ªå®šä¹‰é˜ˆå€¼</strong></td><td style="text-align:left;">åœ¨ <code>vite.config.js</code> ä¸­è°ƒæ•´ <code>build.assetsInlineLimit</code> çš„å€¼ã€‚</td><td style="text-align:left;">è®¾ç½®ä¸º <code>0</code> å¯<strong>å®Œå…¨ç¦ç”¨</strong>èµ„æºå†…è”ã€‚</td></tr><tr><td style="text-align:left;"><strong>å¼€å‘ç¯å¢ƒå¼ºåˆ¶å†…è”</strong></td><td style="text-align:left;">é»˜è®¤è¡Œä¸ºä¸ç¡®å®šï¼Œä½†å¯é€šè¿‡æ’ä»¶ç­‰ç‰¹æ®Šæ‰‹æ®µå®ç°ã€‚</td><td style="text-align:left;"><code>Vite</code> é»˜è®¤æƒ…å†µä¸‹åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„å†…è”è¡Œä¸ºå¯èƒ½ä¸åŒã€‚</td></tr></tbody></table><h3 id="ğŸ“-å®ç”¨å»ºè®®ä¸æ³¨æ„äº‹é¡¹" tabindex="-1">ğŸ“ å®ç”¨å»ºè®®ä¸æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#ğŸ“-å®ç”¨å»ºè®®ä¸æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;ğŸ“ å®ç”¨å»ºè®®ä¸æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h3><ul><li><p><strong>æƒè¡¡å†…è”åˆ©å¼Š</strong>ï¼šè™½ç„¶å†…è”å°èµ„æºå¯ä»¥å‡å°‘è¯·æ±‚ï¼Œä½†è¿‡å¤§çš„èµ„æºç¼–ç ä¸º <code>Base64</code> åä¼šæ˜¾è‘—å¢åŠ ä»£ç åŒ…çš„ä½“ç§¯ï¼Œå¹¶å¯èƒ½å½±å“åŠ è½½é€Ÿåº¦ã€‚å› æ­¤ï¼Œè¯·æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µåˆç†è®¾ç½®é˜ˆå€¼ã€‚</p></li><li><p><strong>æ’é™¤ç‰¹å®šèµ„æº</strong>ï¼šå¦‚æœä½ å¸Œæœ›æŸä¸ªèµ„æºå§‹ç»ˆä»¥ç‹¬ç«‹æ–‡ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œå³ä½¿å®ƒå°äºå†…è”é˜ˆå€¼ï¼Œä¹Ÿå¯ä»¥åœ¨å¯¼å…¥æ—¶ä½¿ç”¨ <code>?url</code> åç¼€æ¥æ˜¾å¼å‘ŠçŸ¥ <code>Vite</code>ã€‚ä¾‹å¦‚ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> imgUrl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./some-image.png?url&#39;</span></span></code></pre></div></li><li><p><strong>å…¬å…±ç›®å½• (<code>public</code>) çš„èµ„æº</strong>ï¼šæ”¾ç½®äº <code>public</code> ç›®å½•ä¸‹çš„èµ„æºä¸ä¼šè¢« <code>Vite</code> å¤„ç†ï¼Œä¹Ÿä¸ä¼šè¢«å†…è”ä¸º <code>Base64</code>ã€‚å®ƒä»¬ä¼šè¢«ç›´æ¥å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ï¼Œå¹¶å§‹ç»ˆé€šè¿‡ç»å¯¹è·¯å¾„å¼•ç”¨ã€‚</p></li></ul><h3 id="ğŸ’-æ€»ç»“-1" tabindex="-1">ğŸ’ æ€»ç»“ <a class="header-anchor" href="#ğŸ’-æ€»ç»“-1" aria-label="Permalink to &quot;ğŸ’ æ€»ç»“&quot;">â€‹</a></h3><br><p><code>Vite</code> çš„è¿™å¥—æœºåˆ¶è®©é™æ€èµ„æºç®¡ç†å˜å¾—å¾ˆçœå¿ƒã€‚ä½ åªéœ€è¦ç†è§£ <code>assetsInlineLimit</code> è¿™ä¸ªå…³é”®é€‰é¡¹ï¼Œå°±èƒ½æ ¹æ®é¡¹ç›®éœ€æ±‚çµæ´»æ§åˆ¶å†…è”è¡Œä¸ºã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¿æŒé»˜è®¤çš„ <code>4KB</code> é˜ˆå€¼æ˜¯ä¸€ä¸ªä¸é”™çš„å¹³è¡¡ç‚¹ã€‚</p>`,45)])])}const c=i(l,[["render",e]]);export{E as __pageData,c as default};
